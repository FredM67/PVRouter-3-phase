<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>3-phase PV router: Mk2_3phase_RFdatalog_temp/main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">3-phase PV router
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_7941a5df981581ef513b158e7bb3820e.html">Mk2_3phase_RFdatalog_temp</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Main code for the PVRouter 3-phase project.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &quot;<a class="el" href="config_8h_source.html">config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="calibration_8h_source.html">calibration.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="processing_8h_source.html">processing.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="types_8h_source.html">types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utils_8h_source.html">utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="validation_8h_source.html">validation.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp__incl.png" border="0" usemap="#aMk2__3phase__RFdatalog__temp_2main_8cpp" alt=""/></div>
<map name="aMk2__3phase__RFdatalog__temp_2main_8cpp" id="aMk2__3phase__RFdatalog__temp_2main_8cpp">
<area shape="rect" title="Main code for the PVRouter 3&#45;phase project." alt="" coords="2041,5,2219,45"/>
<area shape="rect" title=" " alt="" coords="2604,541,2688,566"/>
<area shape="poly" title=" " alt="" coords="2219,23,2338,26,2487,36,2650,57,2731,72,2811,91,2875,101,2934,108,2959,116,2978,128,2991,149,2995,178,2995,401,2993,424,2987,444,2963,479,2928,505,2885,525,2838,538,2789,547,2702,555,2702,549,2788,542,2836,533,2883,520,2925,500,2959,475,2982,442,2988,422,2990,401,2990,178,2986,151,2974,132,2957,121,2933,114,2875,107,2809,96,2730,77,2649,62,2486,42,2338,32,2219,29"/>
<area shape="rect" href="config_8h.html" title="Configuration values to be set by the end&#45;user." alt="" coords="2113,240,2187,265"/>
<area shape="poly" title=" " alt="" coords="2076,48,2018,74,1963,108,1944,127,1932,147,1930,168,1940,190,1965,207,2006,222,2101,242,2099,247,2004,227,1962,212,1936,194,1925,169,1927,146,1939,124,1960,104,2016,69,2074,43"/>
<area shape="rect" href="types_8h.html" title="Some basics classes/types." alt="" coords="1964,387,2035,412"/>
<area shape="poly" title=" " alt="" coords="2042,34,1966,47,1928,58,1892,73,1861,92,1836,115,1820,144,1814,178,1814,254,1818,278,1828,300,1843,319,1862,336,1907,363,1952,382,1950,387,1905,368,1859,340,1839,323,1823,303,1813,280,1809,254,1809,178,1815,142,1832,112,1858,87,1890,68,1926,53,1965,42,2041,29"/>
<area shape="rect" href="utils__relay_8h.html" title="Some utility functions for the relay output feature." alt="" coords="1932,313,2032,339"/>
<area shape="poly" title=" " alt="" coords="2042,43,1991,63,1967,77,1947,95,1929,118,1922,139,1921,162,1926,191,1946,251,1971,300,1966,303,1941,253,1921,193,1916,163,1916,138,1925,115,1943,92,1964,73,1988,58,2040,38"/>
<area shape="rect" href="calibration_8h.html" title="Calibration values definition." alt="" coords="1951,167,2053,192"/>
<area shape="poly" title=" " alt="" coords="2116,48,2023,158,2019,154,2112,44"/>
<area shape="rect" href="processing_8h.html" title="Public functions/variables of processing engine." alt="" coords="2078,167,2182,192"/>
<area shape="poly" title=" " alt="" coords="2133,46,2133,153,2127,153,2127,46"/>
<area shape="rect" href="utils_8h.html" title="Some utility functions." alt="" coords="2335,93,2397,119"/>
<area shape="poly" title=" " alt="" coords="2187,43,2323,88,2321,93,2186,48"/>
<area shape="rect" href="validation_8h.html" title="Compile&#45;time validations." alt="" coords="2585,167,2683,192"/>
<area shape="poly" title=" " alt="" coords="2220,42,2312,64,2409,91,2510,126,2595,159,2593,164,2509,131,2408,96,2310,69,2219,48"/>
<area shape="rect" href="main_8h.html" title=" " alt="" coords="2731,93,2798,119"/>
<area shape="poly" title=" " alt="" coords="2219,35,2718,96,2717,102,2219,40"/>
<area shape="rect" href="config__system_8h.html" title="Basic configuration values to be set by the end&#45;user." alt="" coords="2209,387,2337,412"/>
<area shape="poly" title=" " alt="" coords="2162,264,2256,374,2252,378,2158,268"/>
<area shape="rect" href="debug_8h.html" title="Some macro for the Serial Output and Debugging." alt="" coords="2059,387,2134,412"/>
<area shape="poly" title=" " alt="" coords="2148,267,2108,375,2103,373,2143,265"/>
<area shape="poly" title=" " alt="" coords="2140,268,2023,379,2019,375,2136,264"/>
<area shape="rect" href="utils__dualtariff_8h.html" title="Some utility functions for dual tariff feature." alt="" coords="2118,460,2246,485"/>
<area shape="poly" title=" " alt="" coords="2154,265,2181,446,2176,447,2149,266"/>
<area shape="poly" title=" " alt="" coords="2124,268,2023,310,2021,305,2122,263"/>
<area shape="rect" href="utils__temp_8h.html" title="Provides utilities for managing temperature sensors." alt="" coords="2412,313,2515,339"/>
<area shape="poly" title=" " alt="" coords="2188,260,2400,308,2399,313,2187,265"/>
<area shape="poly" title=" " alt="" coords="2278,411,2292,448,2305,467,2321,483,2356,504,2388,516,2418,521,2448,522,2513,520,2550,523,2592,531,2603,534,2601,539,2591,536,2549,528,2513,526,2448,527,2418,526,2387,521,2354,509,2318,487,2300,471,2288,450,2273,413"/>
<area shape="rect" href="type__traits_8hpp.html" title="Some useful but missing stl functions templates." alt="" coords="1559,460,1679,485"/>
<area shape="poly" title=" " alt="" coords="2209,410,1693,466,1693,461,2208,405"/>
<area shape="rect" href="conditional_8hpp.html" title=" " alt="" coords="5,541,201,566"/>
<area shape="poly" title=" " alt="" coords="1559,476,1340,478,1008,486,615,503,412,518,213,536,175,541,175,536,212,531,411,512,615,498,1007,480,1339,473,1559,471"/>
<area shape="rect" href="decay_8hpp.html" title=" " alt="" coords="225,541,387,566"/>
<area shape="poly" title=" " alt="" coords="1559,476,1365,478,1078,485,742,503,568,518,398,536,369,541,368,535,398,531,568,512,741,498,1078,480,1365,472,1559,471"/>
<area shape="rect" href="enable__if_8hpp.html" title=" " alt="" coords="411,533,551,573"/>
<area shape="poly" title=" " alt="" coords="1559,477,1390,479,1146,487,860,505,712,518,565,536,564,531,711,513,860,499,1146,481,1390,473,1559,471"/>
<area shape="rect" href="function__traits_8hpp.html" title=" " alt="" coords="575,533,725,573"/>
<area shape="poly" title=" " alt="" coords="1559,478,1416,482,1214,492,980,509,739,536,738,531,980,504,1214,486,1416,477,1559,472"/>
<area shape="rect" href="integral__constant_8hpp.html" title=" " alt="" coords="1677,768,1823,808"/>
<area shape="poly" title=" " alt="" coords="1680,474,1800,481,1942,493,2066,509,2109,519,2133,531,2168,577,2178,601,2182,625,2182,649,2176,673,2164,698,2147,722,2126,738,2096,751,2016,770,1924,782,1837,787,1837,782,1923,776,2015,765,2094,746,2123,733,2143,718,2160,695,2171,672,2177,648,2177,625,2173,603,2163,580,2130,535,2107,524,2065,515,1942,498,1800,486,1679,479"/>
<area shape="rect" href="is__array_8hpp.html" title=" " alt="" coords="749,541,924,566"/>
<area shape="poly" title=" " alt="" coords="1559,480,1292,500,1119,516,944,536,910,541,909,536,943,531,1118,510,1291,494,1559,475"/>
<area shape="rect" href="is__base__of_8hpp.html" title=" " alt="" coords="1000,533,1145,573"/>
<area shape="poly" title=" " alt="" coords="1560,483,1382,504,1165,536,1159,537,1158,532,1164,531,1382,499,1559,478"/>
<area shape="rect" href="remove__reference_8hpp.html" title=" " alt="" coords="548,621,717,647"/>
<area shape="poly" title=" " alt="" coords="1559,478,1427,483,1261,493,1101,510,1037,522,988,536,973,545,963,555,953,566,936,576,898,588,845,601,726,622,725,617,844,596,897,583,934,571,949,561,959,551,970,540,986,531,1035,517,1101,505,1260,488,1426,478,1559,473"/>
<area shape="rect" href="is__class_8hpp.html" title=" " alt="" coords="741,621,916,647"/>
<area shape="poly" title=" " alt="" coords="1559,481,1367,501,1271,516,1203,536,1190,545,1181,555,1172,566,1158,576,1117,590,1059,603,930,623,929,618,1058,597,1115,585,1155,571,1169,562,1177,551,1186,541,1201,531,1269,511,1366,495,1559,476"/>
<area shape="rect" href="is__const_8hpp.html" title=" " alt="" coords="2209,695,2387,720"/>
<area shape="poly" title=" " alt="" coords="1680,475,1963,497,2099,513,2148,522,2177,531,2218,564,2250,605,2275,646,2291,681,2286,683,2270,649,2246,608,2214,568,2174,536,2147,527,2099,518,1962,502,1679,480"/>
<area shape="rect" href="is__convertible_8hpp.html" title=" " alt="" coords="940,621,1155,647"/>
<area shape="poly" title=" " alt="" coords="1559,478,1496,483,1420,493,1339,510,1260,536,1244,545,1232,554,1203,576,1150,600,1098,619,1096,614,1148,595,1201,571,1229,550,1241,540,1258,531,1337,505,1419,488,1495,478,1559,473"/>
<area shape="rect" href="is__enum_8hpp.html" title=" " alt="" coords="1271,541,1450,566"/>
<area shape="poly" title=" " alt="" coords="1582,488,1412,539,1410,534,1581,483"/>
<area shape="rect" href="is__floating__point_8hpp.html" title=" " alt="" coords="1230,621,1387,647"/>
<area shape="poly" title=" " alt="" coords="1602,488,1525,536,1495,557,1463,576,1409,600,1358,619,1356,614,1407,595,1461,571,1492,552,1522,531,1599,483"/>
<area shape="rect" href="is__same_8hpp.html" title=" " alt="" coords="1411,695,1515,720"/>
<area shape="poly" title=" " alt="" coords="1619,486,1594,558,1573,605,1544,648,1521,671,1497,690,1493,685,1518,667,1540,645,1568,602,1589,556,1614,485"/>
<area shape="rect" href="is__integral_8hpp.html" title=" " alt="" coords="1412,621,1531,647"/>
<area shape="poly" title=" " alt="" coords="1611,487,1493,613,1490,609,1607,484"/>
<area shape="rect" href="is__pointer_8hpp.html" title=" " alt="" coords="1787,695,1974,720"/>
<area shape="poly" title=" " alt="" coords="1655,483,1788,531,1881,571,1926,581,1964,583,1999,591,2015,602,2031,620,2037,633,2037,645,2032,657,2021,666,1992,682,1957,694,1955,689,1990,677,2018,662,2027,653,2032,644,2032,634,2026,623,2012,606,1996,596,1963,588,1925,586,1880,576,1786,536,1653,488"/>
<area shape="rect" href="is__signed_8hpp.html" title=" " alt="" coords="1607,621,1792,647"/>
<area shape="poly" title=" " alt="" coords="1627,484,1690,608,1685,610,1623,487"/>
<area shape="rect" href="is__unsigned_8hpp.html" title=" " alt="" coords="1816,621,2017,647"/>
<area shape="poly" title=" " alt="" coords="1642,483,1884,612,1882,617,1639,488"/>
<area shape="rect" href="make__unsigned_8hpp.html" title=" " alt="" coords="1893,541,2119,566"/>
<area shape="poly" title=" " alt="" coords="1676,483,1937,535,1936,541,1675,488"/>
<area shape="rect" href="remove__const_8hpp.html" title=" " alt="" coords="2245,533,2391,573"/>
<area shape="poly" title=" " alt="" coords="1680,475,1919,495,2072,510,2226,531,2231,531,2231,537,2226,536,2072,516,1919,500,1679,480"/>
<area shape="rect" href="void__t_8hpp.html" title=" " alt="" coords="2416,541,2580,566"/>
<area shape="poly" title=" " alt="" coords="1680,475,2049,499,2254,515,2404,531,2433,535,2432,541,2403,536,2253,521,2048,505,1680,480"/>
<area shape="rect" title=" " alt="" coords="369,621,443,647"/>
<area shape="poly" title=" " alt="" coords="322,564,382,611,379,615,319,568"/>
<area shape="poly" title=" " alt="" coords="776,569,737,576,458,626,457,621,736,571,775,563"/>
<area shape="poly" title=" " alt="" coords="1000,572,981,576,717,622,716,616,980,571,999,567"/>
<area shape="rect" href="declval_8hpp.html" title=" " alt="" coords="889,695,987,720"/>
<area shape="poly" title=" " alt="" coords="848,644,910,685,907,689,845,649"/>
<area shape="poly" title=" " alt="" coords="2219,723,1838,777,1837,772,2218,717"/>
<area shape="poly" title=" " alt="" coords="1031,649,969,689,966,685,1028,644"/>
<area shape="poly" title=" " alt="" coords="1284,569,920,622,919,617,1283,563"/>
<area shape="poly" title=" " alt="" coords="1316,569,1107,621,1105,615,1314,563"/>
<area shape="poly" title=" " alt="" coords="1355,568,1326,611,1322,608,1351,565"/>
<area shape="poly" title=" " alt="" coords="1312,569,1271,582,1235,599,1222,610,1215,621,1214,632,1220,645,1231,654,1247,663,1292,678,1398,697,1397,702,1291,683,1245,668,1228,659,1216,648,1208,633,1210,619,1218,606,1232,595,1269,577,1310,563"/>
<area shape="poly" title=" " alt="" coords="1379,564,1445,611,1442,615,1375,568"/>
<area shape="poly" title=" " alt="" coords="1318,645,1347,682,1367,702,1390,718,1458,747,1530,766,1600,777,1663,783,1663,788,1600,783,1529,771,1456,752,1387,722,1363,706,1343,685,1314,648"/>
<area shape="poly" title=" " alt="" coords="1335,644,1427,686,1425,691,1332,649"/>
<area shape="rect" href="remove__cv_8hpp.html" title=" " alt="" coords="1540,695,1661,720"/>
<area shape="poly" title=" " alt="" coords="1356,644,1541,689,1540,694,1355,649"/>
<area shape="poly" title=" " alt="" coords="1506,717,1669,762,1668,767,1504,723"/>
<area shape="poly" title=" " alt="" coords="1451,649,1428,663,1407,681,1396,700,1397,709,1401,718,1418,732,1442,743,1509,761,1588,773,1663,780,1663,785,1587,778,1508,766,1440,748,1415,736,1397,722,1391,711,1391,699,1403,678,1425,659,1448,645"/>
<area shape="poly" title=" " alt="" coords="1473,647,1469,681,1463,681,1467,647"/>
<area shape="poly" title=" " alt="" coords="1493,644,1568,685,1566,690,1491,649"/>
<area shape="poly" title=" " alt="" coords="1863,722,1795,763,1792,759,1860,718"/>
<area shape="poly" title=" " alt="" coords="1706,646,1742,754,1737,756,1701,648"/>
<area shape="poly" title=" " alt="" coords="1662,649,1515,693,1514,688,1661,644"/>
<area shape="poly" title=" " alt="" coords="1685,649,1629,689,1626,684,1682,645"/>
<area shape="poly" title=" " alt="" coords="1861,649,1816,667,1795,680,1777,696,1762,724,1755,755,1749,754,1757,722,1773,693,1792,676,1814,662,1859,644"/>
<area shape="poly" title=" " alt="" coords="1839,649,1529,697,1528,692,1838,644"/>
<area shape="poly" title=" " alt="" coords="1866,649,1666,694,1665,689,1865,644"/>
<area shape="rect" href="type__identity_8hpp.html" title=" " alt="" coords="1999,695,2133,720"/>
<area shape="poly" title=" " alt="" coords="2026,564,2054,587,2067,603,2077,620,2082,652,2077,682,2072,681,2076,652,2071,622,2062,606,2050,591,2023,568"/>
<area shape="poly" title=" " alt="" coords="2021,723,1837,768,1836,763,2019,717"/>
<area shape="poly" title=" " alt="" coords="2012,411,2051,448,2078,467,2107,483,2177,506,2237,518,2292,521,2344,520,2454,515,2518,519,2592,531,2604,534,2603,539,2591,536,2518,524,2454,521,2345,525,2292,527,2236,523,2175,511,2105,488,2075,472,2048,452,2008,414"/>
<area shape="poly" title=" " alt="" coords="1964,412,1952,415,1693,462,1692,457,1951,409,1963,407"/>
<area shape="rect" href="constants_8h.html" title="Some constants." alt="" coords="2332,460,2429,485"/>
<area shape="poly" title=" " alt="" coords="2035,407,2048,409,2319,459,2318,464,2047,415,2034,412"/>
<area shape="poly" title=" " alt="" coords="2424,483,2592,531,2602,534,2600,539,2591,536,2423,488"/>
<area shape="poly" title=" " alt="" coords="2247,480,2447,508,2592,531,2603,534,2602,539,2591,536,2446,513,2246,485"/>
<area shape="poly" title=" " alt="" coords="2029,336,2213,381,2212,386,2028,341"/>
<area shape="poly" title=" " alt="" coords="1932,335,1791,355,1723,370,1677,389,1662,401,1649,417,1631,449,1627,446,1645,414,1658,398,1674,384,1721,365,1790,350,1931,330"/>
<area shape="poly" title=" " alt="" coords="2002,336,2068,377,2065,382,1999,341"/>
<area shape="poly" title=" " alt="" coords="1987,338,1996,373,1991,374,1982,340"/>
<area shape="rect" href="movingAvg_8h.html" title="Code for sliding&#45;window average." alt="" coords="1687,387,1794,412"/>
<area shape="poly" title=" " alt="" coords="1944,341,1794,385,1792,380,1942,336"/>
<area shape="rect" href="ewma__avg_8hpp.html" title="This file implements an Exponentially Weighted Moving Average template class." alt="" coords="1819,387,1940,412"/>
<area shape="poly" title=" " alt="" coords="1967,341,1909,381,1906,376,1964,336"/>
<area shape="rect" href="utils__pins_8h.html" title="Some utility functions for pins manipulation." alt="" coords="2513,387,2609,412"/>
<area shape="poly" title=" " alt="" coords="2033,331,2499,388,2499,393,2032,336"/>
<area shape="poly" title=" " alt="" coords="1768,410,1864,447,1926,467,1989,483,2080,498,2157,505,2290,507,2423,508,2501,515,2592,531,2604,534,2603,539,2591,536,2500,521,2423,513,2290,512,2157,511,2079,503,1988,488,1924,472,1862,452,1766,415"/>
<area shape="poly" title=" " alt="" coords="1723,414,1652,455,1649,451,1720,410"/>
<area shape="poly" title=" " alt="" coords="1899,410,1968,447,2013,467,2060,483,2139,501,2207,509,2267,512,2324,511,2443,511,2512,517,2592,531,2604,534,2603,539,2591,536,2511,522,2442,516,2324,517,2267,517,2206,515,2138,506,2059,488,2011,472,1966,452,1897,414"/>
<area shape="poly" title=" " alt="" coords="1838,415,1675,459,1674,454,1837,409"/>
<area shape="poly" title=" " alt="" coords="2569,411,2635,527,2630,530,2565,413"/>
<area shape="poly" title=" " alt="" coords="2469,338,2482,372,2503,411,2531,446,2563,479,2622,530,2618,534,2559,483,2527,450,2498,413,2477,374,2464,340"/>
<area shape="poly" title=" " alt="" coords="2459,340,2396,449,2392,447,2454,338"/>
<area shape="poly" title=" " alt="" coords="2027,190,2115,232,2112,236,2025,194"/>
<area shape="poly" title=" " alt="" coords="2136,192,2146,226,2141,228,2131,193"/>
<area shape="poly" title=" " alt="" coords="2383,117,2405,138,2422,166,2424,179,2422,192,2413,253,2402,314,2386,446,2381,446,2397,313,2408,252,2417,192,2419,179,2417,168,2400,141,2380,121"/>
<area shape="poly" title=" " alt="" coords="2399,115,2436,133,2453,148,2467,165,2479,200,2482,237,2479,271,2473,300,2468,299,2474,271,2477,237,2474,201,2462,168,2449,151,2433,138,2396,119"/>
<area shape="poly" title=" " alt="" coords="2335,116,2067,168,2066,163,2334,111"/>
<area shape="poly" title=" " alt="" coords="2335,119,2182,165,2181,160,2334,114"/>
<area shape="rect" href="FastDivision_8h.html" title=" " alt="" coords="2791,240,2904,265"/>
<area shape="poly" title=" " alt="" coords="2398,107,2530,123,2614,140,2696,164,2765,196,2821,230,2818,234,2762,201,2694,169,2612,145,2529,129,2397,112"/>
<area shape="rect" href="dualtariff_8h.html" title="Classes/types needed for dual&#45;tariff support." alt="" coords="2206,167,2299,192"/>
<area shape="poly" title=" " alt="" coords="2349,121,2284,162,2281,157,2346,116"/>
<area shape="rect" href="teleinfo_8h.html" title="Manages telemetry data and frame formatting." alt="" coords="2324,167,2408,192"/>
<area shape="poly" title=" " alt="" coords="2369,119,2369,153,2363,153,2363,119"/>
<area shape="rect" href="utils__rf_8h.html" title="Some utility functions for the RF chip." alt="" coords="2585,240,2664,265"/>
<area shape="poly" title=" " alt="" coords="2398,114,2455,135,2517,164,2564,196,2603,228,2600,232,2561,201,2514,169,2453,140,2397,119"/>
<area shape="poly" title=" " alt="" coords="2842,267,2664,530,2659,527,2837,264"/>
<area shape="poly" title=" " alt="" coords="2238,194,2180,234,2177,230,2235,190"/>
<area shape="poly" title=" " alt="" coords="2385,190,2512,281,2580,337,2606,363,2623,385,2638,422,2647,461,2650,527,2645,527,2641,461,2633,423,2618,388,2602,367,2576,341,2509,285,2382,194"/>
<area shape="poly" title=" " alt="" coords="2332,195,2199,238,2197,233,2330,189"/>
<area shape="poly" title=" " alt="" coords="2363,193,2286,375,2281,373,2359,191"/>
<area shape="rect" title=" " alt="" coords="2591,313,2664,339"/>
<area shape="poly" title=" " alt="" coords="2628,266,2629,300,2624,300,2622,266"/>
<area shape="poly" title=" " alt="" coords="2585,191,2201,247,2200,241,2584,185"/>
<area shape="poly" title=" " alt="" coords="2647,191,2664,212,2678,239,2694,292,2692,316,2677,341,2661,350,2632,358,2547,374,2351,395,2350,389,2546,368,2631,353,2659,345,2673,337,2687,314,2688,293,2673,241,2660,215,2643,194"/>
<area shape="poly" title=" " alt="" coords="2665,190,2697,209,2712,222,2723,239,2735,266,2740,290,2737,314,2723,340,2703,362,2678,377,2650,388,2623,395,2622,390,2649,383,2675,372,2699,357,2719,337,2732,313,2735,290,2730,268,2718,241,2708,226,2694,213,2662,194"/>
<area shape="poly" title=" " alt="" coords="2635,193,2631,227,2625,226,2630,192"/>
<area shape="poly" title=" " alt="" coords="2799,115,2843,133,2891,161,2912,180,2929,201,2940,224,2945,251,2945,401,2938,438,2919,469,2890,494,2855,513,2817,528,2776,539,2702,551,2702,545,2775,534,2815,523,2853,508,2887,490,2915,466,2933,436,2939,400,2939,252,2935,226,2924,203,2908,183,2888,166,2841,138,2797,120"/>
</map>
</div>
</div>
<p><a href="main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga31f3d562faae6b598324b56299d74f7d" id="r_ga31f3d562faae6b598324b56299d74f7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GeneralProcessing.html#ga31f3d562faae6b598324b56299d74f7d">checkDiversionOnOff</a> ()</td></tr>
<tr class="memdesc:ga31f3d562faae6b598324b56299d74f7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks and updates the diversion state based on the diversion pin.  <br /></td></tr>
<tr class="separator:ga31f3d562faae6b598324b56299d74f7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5157f7f79cf8c75c2d7b41d8ed47a7ef" id="r_ga5157f7f79cf8c75c2d7b41d8ed47a7ef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GeneralProcessing.html#ga5157f7f79cf8c75c2d7b41d8ed47a7ef">forceFullPower</a> ()</td></tr>
<tr class="memdesc:ga5157f7f79cf8c75c2d7b41d8ed47a7ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forces all loads to full power if the override pin is active.  <br /></td></tr>
<tr class="separator:ga5157f7f79cf8c75c2d7b41d8ed47a7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga143b5ab1cc611c04c761240ce5687fdd" id="r_ga143b5ab1cc611c04c761240ce5687fdd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GeneralProcessing.html#ga143b5ab1cc611c04c761240ce5687fdd">handlePerSecondTasks</a> (bool &amp;bOffPeak, int16_t &amp;iTemperature_x100)</td></tr>
<tr class="memdesc:ga143b5ab1cc611c04c761240ce5687fdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles tasks that need to be executed every second.  <br /></td></tr>
<tr class="separator:ga143b5ab1cc611c04c761240ce5687fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05c2e5b588ced1cd7312f5b0edc5b295" id="r_ga05c2e5b588ced1cd7312f5b0edc5b295"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TimeCritical.html#ga05c2e5b588ced1cd7312f5b0edc5b295">ISR</a> (ADC_vect)</td></tr>
<tr class="memdesc:ga05c2e5b588ced1cd7312f5b0edc5b295"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt Service Routine - Interrupt-Driven Analog Conversion.  <br /></td></tr>
<tr class="separator:ga05c2e5b588ced1cd7312f5b0edc5b295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe461d27b9c48d5921c00d521181f12f" id="r_gafe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GeneralProcessing.html#gafe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:gafe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main processor loop.  <br /></td></tr>
<tr class="separator:gafe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4774b22349c58cef345ad396aecc868" id="r_gab4774b22349c58cef345ad396aecc868"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GeneralProcessing.html#gab4774b22349c58cef345ad396aecc868">proceedLoadPrioritiesAndOverriding</a> (const int16_t &amp;currentTemperature_x100)</td></tr>
<tr class="memdesc:gab4774b22349c58cef345ad396aecc868"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles load priorities and overriding logic.  <br /></td></tr>
<tr class="separator:gab4774b22349c58cef345ad396aecc868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b2ee7cd0a5810e272e1ffb0b5daf0ae" id="r_ga2b2ee7cd0a5810e272e1ffb0b5daf0ae"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GeneralProcessing.html#ga2b2ee7cd0a5810e272e1ffb0b5daf0ae">proceedLoadPrioritiesAndOverridingDualTariff</a> (const int16_t &amp;currentTemperature_x100)</td></tr>
<tr class="memdesc:ga2b2ee7cd0a5810e272e1ffb0b5daf0ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles load priorities and overriding during dual tariff periods.  <br /></td></tr>
<tr class="separator:ga2b2ee7cd0a5810e272e1ffb0b5daf0ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b9428fd01019319970f27b88bb1cf33" id="r_ga9b9428fd01019319970f27b88bb1cf33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GeneralProcessing.html#ga9b9428fd01019319970f27b88bb1cf33">proceedRotation</a> ()</td></tr>
<tr class="memdesc:ga9b9428fd01019319970f27b88bb1cf33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Proceeds with load priority rotation.  <br /></td></tr>
<tr class="separator:ga9b9428fd01019319970f27b88bb1cf33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90dc0c3192649d64ae885b62e6afa6e4" id="r_a90dc0c3192649d64ae885b62e6afa6e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90dc0c3192649d64ae885b62e6afa6e4">processTemperatureData</a> ()</td></tr>
<tr class="memdesc:a90dc0c3192649d64ae885b62e6afa6e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes temperature data from DS18B20 sensors.  <br /></td></tr>
<tr class="separator:a90dc0c3192649d64ae885b62e6afa6e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4fc01d736fe50cf5b977f755b675f11d" id="r_ga4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Initialization.html#ga4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:ga4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called once during startup.  <br /></td></tr>
<tr class="separator:ga4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09f681954987d95f85831ca82365f987" id="r_ga09f681954987d95f85831ca82365f987"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GeneralProcessing.html#ga09f681954987d95f85831ca82365f987">updatePowerAndVoltageData</a> ()</td></tr>
<tr class="memdesc:ga09f681954987d95f85831ca82365f987"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates power and voltage data for all phases.  <br /></td></tr>
<tr class="separator:ga09f681954987d95f85831ca82365f987"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main code for the PVRouter 3-phase project. </p>
<dl class="section author"><dt>Author</dt><dd>Frédéric Metrich (<a href="#" onclick="location.href='mai'+'lto:'+'fre'+'de'+'ric'+'.m'+'etr'+'ic'+'h@l'+'iv'+'e.f'+'r'; return false;">frede<span class="obfuscator">.nosp@m.</span>ric.<span class="obfuscator">.nosp@m.</span>metri<span class="obfuscator">.nosp@m.</span>ch@l<span class="obfuscator">.nosp@m.</span>ive.f<span class="obfuscator">.nosp@m.</span>r</a>) </dd></dl>
<p>This file contains the main logic for the PVRouter, including the setup and loop functions, as well as interrupt service routines (ISRs) and utility functions for managing load priorities, temperature sensing, and telemetry data.</p>
<ul>
<li><b>Interrupt-Driven Analog Conversion</b>: Uses an ISR to process ADC data for voltage and current sensors.</li>
<li><b>Load Management</b>: Includes functions for load priority rotation, forced full power, and dual tariff handling.</li>
<li><b>Telemetry</b>: Sends telemetry data in various formats (e.g., IoT, EmonCMS).</li>
<li><b>Temperature Sensing</b>: Supports DS18B20 sensors for temperature monitoring.</li>
<li><b>Watchdog</b>: Toggles a pin to indicate system activity.</li>
</ul>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-02-15</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2023 </dd></dl>

<p class="definition">Definition in file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a90dc0c3192649d64ae885b62e6afa6e4" name="a90dc0c3192649d64ae885b62e6afa6e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90dc0c3192649d64ae885b62e6afa6e4">&#9670;&#160;</a></span>processTemperatureData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void processTemperatureData </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes temperature data from DS18B20 sensors. </p>
<p>This function reads temperature values from all connected DS18B20 sensors, filters out invalid readings, and updates the telemetry data structure with valid temperature values. Invalid readings are identified as 85.00°C (encoded as 8500) with a delta greater than 5.00°C (encoded as 500) from the previous reading. After processing, it requests new temperature measurements for the next cycle.</p>
<dl class="section note"><dt>Note</dt><dd>This function assumes that temperature values are stored as integers multiplied by 100 for precision.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>The <code>temperatureSensing</code> object must be initialized and configured with the connected DS18B20 sensors.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The <code>tx_data.temperature_x100</code> array is updated with the latest valid temperature readings. </dd></dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00454">454</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a90dc0c3192649d64ae885b62e6afa6e4_icgraph.png" border="0" usemap="#amain_8cpp_a90dc0c3192649d64ae885b62e6afa6e4_icgraph" alt=""/></div>
<map name="amain_8cpp_a90dc0c3192649d64ae885b62e6afa6e4_icgraph" id="amain_8cpp_a90dc0c3192649d64ae885b62e6afa6e4_icgraph">
<area shape="rect" title="Processes temperature data from DS18B20 sensors." alt="" coords="104,5,289,31"/>
<area shape="rect" href="group__GeneralProcessing.html#gafe461d27b9c48d5921c00d521181f12f" title="Main processor loop." alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,56,21,56,15,90,15"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
