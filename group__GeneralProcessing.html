<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>3-phase PV router: General Processing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">3-phase PV router
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">General Processing</div></div>
</div><!--header-->
<div class="contents">

<p>Functions and routines that handle general system processing tasks.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEWMA__average.html">EWMA_average&lt; A &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements an Exponentially Weighted Moving Average (EWMA).  <a href="classEWMA__average.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga31f3d562faae6b598324b56299d74f7d" id="r_ga31f3d562faae6b598324b56299d74f7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga31f3d562faae6b598324b56299d74f7d">checkDiversionOnOff</a> ()</td></tr>
<tr class="memdesc:ga31f3d562faae6b598324b56299d74f7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks and updates the diversion state based on the diversion pin.  <br /></td></tr>
<tr class="separator:ga31f3d562faae6b598324b56299d74f7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5157f7f79cf8c75c2d7b41d8ed47a7ef" id="r_ga5157f7f79cf8c75c2d7b41d8ed47a7ef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5157f7f79cf8c75c2d7b41d8ed47a7ef">forceFullPower</a> ()</td></tr>
<tr class="memdesc:ga5157f7f79cf8c75c2d7b41d8ed47a7ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forces all loads to full power if the override pin is active.  <br /></td></tr>
<tr class="separator:ga5157f7f79cf8c75c2d7b41d8ed47a7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga143b5ab1cc611c04c761240ce5687fdd" id="r_ga143b5ab1cc611c04c761240ce5687fdd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga143b5ab1cc611c04c761240ce5687fdd">handlePerSecondTasks</a> (bool &amp;bOffPeak, int16_t &amp;iTemperature_x100)</td></tr>
<tr class="memdesc:ga143b5ab1cc611c04c761240ce5687fdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles tasks that need to be executed every second.  <br /></td></tr>
<tr class="separator:ga143b5ab1cc611c04c761240ce5687fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae473b1c0d80fe056d1fab9bdee38aca1" id="r_gae473b1c0d80fe056d1fab9bdee38aca1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae473b1c0d80fe056d1fab9bdee38aca1">logLoadPriorities</a> ()</td></tr>
<tr class="memdesc:gae473b1c0d80fe056d1fab9bdee38aca1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the load priorities to the Serial output.  <br /></td></tr>
<tr class="separator:gae473b1c0d80fe056d1fab9bdee38aca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe461d27b9c48d5921c00d521181f12f" id="r_gafe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:gafe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main processor loop.  <br /></td></tr>
<tr class="separator:gafe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4774b22349c58cef345ad396aecc868" id="r_gab4774b22349c58cef345ad396aecc868"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab4774b22349c58cef345ad396aecc868">proceedLoadPrioritiesAndOverriding</a> (const int16_t &amp;currentTemperature_x100)</td></tr>
<tr class="memdesc:gab4774b22349c58cef345ad396aecc868"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles load priorities and overriding logic.  <br /></td></tr>
<tr class="separator:gab4774b22349c58cef345ad396aecc868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b2ee7cd0a5810e272e1ffb0b5daf0ae" id="r_ga2b2ee7cd0a5810e272e1ffb0b5daf0ae"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2b2ee7cd0a5810e272e1ffb0b5daf0ae">proceedLoadPrioritiesAndOverridingDualTariff</a> (const int16_t &amp;currentTemperature_x100)</td></tr>
<tr class="memdesc:ga2b2ee7cd0a5810e272e1ffb0b5daf0ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles load priorities and overriding during dual tariff periods.  <br /></td></tr>
<tr class="separator:ga2b2ee7cd0a5810e272e1ffb0b5daf0ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b9428fd01019319970f27b88bb1cf33" id="r_ga9b9428fd01019319970f27b88bb1cf33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9b9428fd01019319970f27b88bb1cf33">proceedRotation</a> ()</td></tr>
<tr class="memdesc:ga9b9428fd01019319970f27b88bb1cf33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Proceeds with load priority rotation.  <br /></td></tr>
<tr class="separator:ga9b9428fd01019319970f27b88bb1cf33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade56d6fce22a518b8feff1a150461f94" id="r_gade56d6fce22a518b8feff1a150461f94"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gade56d6fce22a518b8feff1a150461f94">sendResults</a> (bool bOffPeak)</td></tr>
<tr class="memdesc:gade56d6fce22a518b8feff1a150461f94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints or sends telemetry data logs based on the selected output format.  <br /></td></tr>
<tr class="separator:gade56d6fce22a518b8feff1a150461f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09f681954987d95f85831ca82365f987" id="r_ga09f681954987d95f85831ca82365f987"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga09f681954987d95f85831ca82365f987">updatePowerAndVoltageData</a> ()</td></tr>
<tr class="memdesc:ga09f681954987d95f85831ca82365f987"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates power and voltage data for all phases.  <br /></td></tr>
<tr class="separator:ga09f681954987d95f85831ca82365f987"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions and routines that handle general system processing tasks. </p>
<p>This group includes functions that are not time-critical but are essential for the overall operation of the system. These tasks include monitoring system states, managing load priorities, and handling diversion logic.</p>
<ul>
<li>Functions in this group are typically called from the main loop or other non-interrupt contexts.</li>
<li>They ensure the system operates correctly and adapts to changing conditions. </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga31f3d562faae6b598324b56299d74f7d" name="ga31f3d562faae6b598324b56299d74f7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga31f3d562faae6b598324b56299d74f7d">&#9670;&#160;</a></span>checkDiversionOnOff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkDiversionOnOff </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks and updates the diversion state based on the diversion pin. </p>
<p>This function monitors the state of the diversion pin and updates the global <code>b_diversionOff</code> flag accordingly. It also logs changes in the diversion state for debugging purposes if enabled.</p>
<ul>
<li>If the diversion pin is LOW, the diversion is considered OFF.</li>
<li>If the diversion pin is HIGH, the diversion is considered ON.</li>
<li>Debug messages are printed when the diversion state changes (if debugging is enabled). </li>
</ul>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00190">190</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_ga31f3d562faae6b598324b56299d74f7d_cgraph.png" border="0" usemap="#agroup__GeneralProcessing_ga31f3d562faae6b598324b56299d74f7d_cgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_ga31f3d562faae6b598324b56299d74f7d_cgraph" id="agroup__GeneralProcessing_ga31f3d562faae6b598324b56299d74f7d_cgraph">
<area shape="rect" title="Checks and updates the diversion state based on the diversion pin." alt="" coords="5,5,164,31"/>
<area shape="rect" href="utils__pins_8h.html#a410a7bdd300104398ce91797bd936cdb" title="Get the Pin State." alt="" coords="212,5,309,31"/>
<area shape="poly" title=" " alt="" coords="164,15,198,15,198,21,164,21"/>
<area shape="rect" href="utils__pins_8h.html#abaa54130a12679d0dcc0e7578e0e4d37" title="Read the specified bit." alt="" coords="357,5,432,31"/>
<area shape="poly" title=" " alt="" coords="309,15,343,15,343,21,309,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_ga31f3d562faae6b598324b56299d74f7d_icgraph.png" border="0" usemap="#agroup__GeneralProcessing_ga31f3d562faae6b598324b56299d74f7d_icgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_ga31f3d562faae6b598324b56299d74f7d_icgraph" id="agroup__GeneralProcessing_ga31f3d562faae6b598324b56299d74f7d_icgraph">
<area shape="rect" title="Checks and updates the diversion state based on the diversion pin." alt="" coords="323,5,481,31"/>
<area shape="rect" href="group__GeneralProcessing.html#ga143b5ab1cc611c04c761240ce5687fdd" title="Handles tasks that need to be executed every second." alt="" coords="104,5,275,31"/>
<area shape="poly" title=" " alt="" coords="309,21,275,21,275,15,309,15"/>
<area shape="rect" href="group__GeneralProcessing.html#gafe461d27b9c48d5921c00d521181f12f" title="Main processor loop." alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,57,21,57,15,90,15"/>
</map>
</div>

</div>
</div>
<a id="ga5157f7f79cf8c75c2d7b41d8ed47a7ef" name="ga5157f7f79cf8c75c2d7b41d8ed47a7ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5157f7f79cf8c75c2d7b41d8ed47a7ef">&#9670;&#160;</a></span>forceFullPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool forceFullPower </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Forces all loads to full power if the override pin is active. </p>
<p>This function checks the state of the override pin and forces all loads to full power if the pin is active. It also logs changes in the override state for debugging purposes if enabled.</p>
<ul>
<li>If the override pin is LOW, all loads are forced to full power.</li>
<li>If the override pin is HIGH, normal load behavior is restored.</li>
<li>Debug messages are printed when the override state changes (if debugging is enabled).</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>true if loads are forced to full power, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00147">147</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_ga5157f7f79cf8c75c2d7b41d8ed47a7ef_cgraph.png" border="0" usemap="#agroup__GeneralProcessing_ga5157f7f79cf8c75c2d7b41d8ed47a7ef_cgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_ga5157f7f79cf8c75c2d7b41d8ed47a7ef_cgraph" id="agroup__GeneralProcessing_ga5157f7f79cf8c75c2d7b41d8ed47a7ef_cgraph">
<area shape="rect" title="Forces all loads to full power if the override pin is active." alt="" coords="5,5,124,31"/>
<area shape="rect" href="utils__pins_8h.html#a410a7bdd300104398ce91797bd936cdb" title="Get the Pin State." alt="" coords="172,5,269,31"/>
<area shape="poly" title=" " alt="" coords="124,15,158,15,158,21,124,21"/>
<area shape="rect" href="utils__pins_8h.html#abaa54130a12679d0dcc0e7578e0e4d37" title="Read the specified bit." alt="" coords="317,5,392,31"/>
<area shape="poly" title=" " alt="" coords="269,15,303,15,303,21,269,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_ga5157f7f79cf8c75c2d7b41d8ed47a7ef_icgraph.png" border="0" usemap="#agroup__GeneralProcessing_ga5157f7f79cf8c75c2d7b41d8ed47a7ef_icgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_ga5157f7f79cf8c75c2d7b41d8ed47a7ef_icgraph" id="agroup__GeneralProcessing_ga5157f7f79cf8c75c2d7b41d8ed47a7ef_icgraph">
<area shape="rect" title="Forces all loads to full power if the override pin is active." alt="" coords="323,5,441,31"/>
<area shape="rect" href="group__GeneralProcessing.html#ga143b5ab1cc611c04c761240ce5687fdd" title="Handles tasks that need to be executed every second." alt="" coords="104,5,275,31"/>
<area shape="poly" title=" " alt="" coords="309,21,275,21,275,15,309,15"/>
<area shape="rect" href="group__GeneralProcessing.html#gafe461d27b9c48d5921c00d521181f12f" title="Main processor loop." alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,57,21,57,15,90,15"/>
</map>
</div>

</div>
</div>
<a id="ga143b5ab1cc611c04c761240ce5687fdd" name="ga143b5ab1cc611c04c761240ce5687fdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga143b5ab1cc611c04c761240ce5687fdd">&#9670;&#160;</a></span>handlePerSecondTasks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handlePerSecondTasks </td>
          <td>(</td>
          <td class="paramtype">bool &amp;</td>          <td class="paramname"><span class="paramname"><em>bOffPeak</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t &amp;</td>          <td class="paramname"><span class="paramname"><em>iTemperature_x100</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles tasks that need to be executed every second. </p>
<p>This function performs various tasks that are triggered once per second, ensuring proper system operation and load management.</p>
<ul>
<li>Increments the absence of diverted energy count if no energy is being diverted.</li>
<li>Toggles the watchdog pin if the feature is enabled.</li>
<li>Checks and updates the diversion state.</li>
<li>Manages load priorities and overriding based on the current temperature.</li>
<li>Updates relay durations and proceeds with relay state transitions if relay diversion is enabled.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bOffPeak</td><td>Reference to the off-peak state flag. </td></tr>
    <tr><td class="paramname">iTemperature_x100</td><td>Current temperature multiplied by 100 (default to 0 if temperature sensing is disabled). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00491">491</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_ga143b5ab1cc611c04c761240ce5687fdd_cgraph.png" border="0" usemap="#agroup__GeneralProcessing_ga143b5ab1cc611c04c761240ce5687fdd_cgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_ga143b5ab1cc611c04c761240ce5687fdd_cgraph" id="agroup__GeneralProcessing_ga143b5ab1cc611c04c761240ce5687fdd_cgraph">
<area shape="rect" title="Handles tasks that need to be executed every second." alt="" coords="5,129,176,155"/>
<area shape="rect" href="group__GeneralProcessing.html#ga31f3d562faae6b598324b56299d74f7d" title="Checks and updates the diversion state based on the diversion pin." alt="" coords="475,5,633,31"/>
<area shape="poly" title=" " alt="" coords="106,127,156,93,189,74,223,59,283,42,346,30,461,18,461,23,347,35,285,47,225,65,191,79,159,97,109,131"/>
<area shape="rect" href="group__GeneralProcessing.html#ga5157f7f79cf8c75c2d7b41d8ed47a7ef" title="Forces all loads to full power if the override pin is active." alt="" coords="259,75,377,100"/>
<area shape="poly" title=" " alt="" coords="143,127,251,101,252,106,145,132"/>
<area shape="rect" href="group__GeneralProcessing.html#gab4774b22349c58cef345ad396aecc868" title="Handles load priorities and overriding logic." alt="" coords="224,150,412,190"/>
<area shape="poly" title=" " alt="" coords="177,150,211,154,210,159,176,155"/>
<area shape="rect" href="utils__pins_8h.html#aaec5db9d46ba784c4f16046e6deb6977" title="Toggle the specified pin." alt="" coords="277,240,359,265"/>
<area shape="poly" title=" " alt="" coords="119,152,280,232,278,236,117,157"/>
<area shape="rect" href="utils__pins_8h.html#a410a7bdd300104398ce91797bd936cdb" title="Get the Pin State." alt="" coords="712,81,809,107"/>
<area shape="poly" title=" " alt="" coords="594,28,649,47,716,74,715,79,647,53,592,33"/>
<area shape="rect" href="utils__pins_8h.html#abaa54130a12679d0dcc0e7578e0e4d37" title="Read the specified bit." alt="" coords="901,81,976,107"/>
<area shape="poly" title=" " alt="" coords="809,91,888,91,888,97,809,97"/>
<area shape="poly" title=" " alt="" coords="378,86,698,90,698,96,378,91"/>
<area shape="poly" title=" " alt="" coords="412,150,460,142,698,102,699,107,460,147,413,156"/>
<area shape="rect" href="group__GeneralProcessing.html#ga2b2ee7cd0a5810e272e1ffb0b5daf0ae" title="Handles load priorities and overriding during dual tariff periods." alt="" coords="460,157,648,197"/>
<area shape="poly" title=" " alt="" coords="412,170,446,171,446,176,412,175"/>
<area shape="rect" href="group__GeneralProcessing.html#ga9b9428fd01019319970f27b88bb1cf33" title="Proceeds with load priority rotation." alt="" coords="696,192,825,217"/>
<area shape="poly" title=" " alt="" coords="379,187,460,206,513,211,554,211,648,206,682,205,682,210,648,211,554,216,512,216,460,211,378,193"/>
<area shape="poly" title=" " alt="" coords="604,154,714,110,716,115,606,159"/>
<area shape="poly" title=" " alt="" coords="649,187,683,191,682,197,648,192"/>
<area shape="rect" href="group__GeneralProcessing.html#gae473b1c0d80fe056d1fab9bdee38aca1" title="Prints the load priorities to the Serial output." alt="" coords="873,192,1004,217"/>
<area shape="poly" title=" " alt="" coords="826,202,860,202,860,207,826,207"/>
<area shape="rect" href="utils__pins_8h.html#a23ed26b879b65f5ddf07facc1e4b18bc" title="Set the specified bit to 1." alt="" coords="521,272,587,297"/>
<area shape="poly" title=" " alt="" coords="360,256,507,276,507,281,359,261"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_ga143b5ab1cc611c04c761240ce5687fdd_icgraph.png" border="0" usemap="#agroup__GeneralProcessing_ga143b5ab1cc611c04c761240ce5687fdd_icgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_ga143b5ab1cc611c04c761240ce5687fdd_icgraph" id="agroup__GeneralProcessing_ga143b5ab1cc611c04c761240ce5687fdd_icgraph">
<area shape="rect" title="Handles tasks that need to be executed every second." alt="" coords="104,5,275,31"/>
<area shape="rect" href="group__GeneralProcessing.html#gafe461d27b9c48d5921c00d521181f12f" title="Main processor loop." alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,57,21,57,15,90,15"/>
</map>
</div>

</div>
</div>
<a id="gae473b1c0d80fe056d1fab9bdee38aca1" name="gae473b1c0d80fe056d1fab9bdee38aca1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae473b1c0d80fe056d1fab9bdee38aca1">&#9670;&#160;</a></span>logLoadPriorities()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void logLoadPriorities </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prints the load priorities to the Serial output. </p>
<p>This function logs the current load priorities and states to the Serial output for debugging purposes. It provides a detailed view of the load configuration and their respective priorities.</p>
<ul>
<li>Each load's priority and state are printed in a human-readable format.</li>
<li>This function is only active when debugging is enabled (<code>ENABLE_DEBUG</code>). </li>
</ul>

<p class="definition">Definition at line <a class="el" href="utils_8h_source.html#l00451">451</a> of file <a class="el" href="utils_8h_source.html">utils.h</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_gae473b1c0d80fe056d1fab9bdee38aca1_icgraph.png" border="0" usemap="#agroup__GeneralProcessing_gae473b1c0d80fe056d1fab9bdee38aca1_icgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_gae473b1c0d80fe056d1fab9bdee38aca1_icgraph" id="agroup__GeneralProcessing_gae473b1c0d80fe056d1fab9bdee38aca1_icgraph">
<area shape="rect" title="Prints the load priorities to the Serial output." alt="" coords="972,37,1103,62"/>
<area shape="rect" href="group__GeneralProcessing.html#ga9b9428fd01019319970f27b88bb1cf33" title="Proceeds with load priority rotation." alt="" coords="795,11,924,37"/>
<area shape="poly" title=" " alt="" coords="958,41,924,36,925,31,959,35"/>
<area shape="rect" href="group__Initialization.html#ga4fc01d736fe50cf5b977f755b675f11d" title="Called once during startup." alt="" coords="830,61,889,86"/>
<area shape="poly" title=" " alt="" coords="959,63,889,72,888,67,958,57"/>
<area shape="rect" href="group__GeneralProcessing.html#gab4774b22349c58cef345ad396aecc868" title="Handles load priorities and overriding logic." alt="" coords="323,5,511,45"/>
<area shape="poly" title=" " alt="" coords="781,25,747,24,559,24,511,25,511,20,559,19,747,19,781,19"/>
<area shape="rect" href="group__GeneralProcessing.html#ga2b2ee7cd0a5810e272e1ffb0b5daf0ae" title="Handles load priorities and overriding during dual tariff periods." alt="" coords="559,33,747,73"/>
<area shape="poly" title=" " alt="" coords="782,38,747,43,747,37,781,32"/>
<area shape="rect" href="group__GeneralProcessing.html#ga143b5ab1cc611c04c761240ce5687fdd" title="Handles tasks that need to be executed every second." alt="" coords="104,13,275,38"/>
<area shape="poly" title=" " alt="" coords="309,28,275,28,275,23,309,23"/>
<area shape="rect" href="group__GeneralProcessing.html#gafe461d27b9c48d5921c00d521181f12f" title="Main processor loop." alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="545,43,511,39,511,34,545,38"/>
</map>
</div>

</div>
</div>
<a id="gafe461d27b9c48d5921c00d521181f12f" name="gafe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe461d27b9c48d5921c00d521181f12f">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main processor loop. </p>
<p>This function handles non-time-critical tasks such as load management, telemetry updates, and temperature sensing. It processes ADC data through flags set by the ISR and ensures proper system operation.</p>
<ul>
<li>Executes tasks triggered by the <code>b_newMainsCycle</code> flag, which is set after every pair of ADC conversions.</li>
<li>Handles per-second tasks such as load priority management and diversion state updates.</li>
<li>Processes data logging events and updates power, voltage, and temperature data.</li>
<li>Sends telemetry results and updates relay states if relay diversion is enabled. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00532">532</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_gafe461d27b9c48d5921c00d521181f12f_cgraph.png" border="0" usemap="#agroup__GeneralProcessing_gafe461d27b9c48d5921c00d521181f12f_cgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_gafe461d27b9c48d5921c00d521181f12f_cgraph" id="agroup__GeneralProcessing_gafe461d27b9c48d5921c00d521181f12f_cgraph">
<area shape="rect" title="Main processor loop." alt="" coords="5,288,56,313"/>
<area shape="rect" href="group__GeneralProcessing.html#ga143b5ab1cc611c04c761240ce5687fdd" title="Handles tasks that need to be executed every second." alt="" coords="125,156,295,181"/>
<area shape="poly" title=" " alt="" coords="48,285,179,187,182,192,51,290"/>
<area shape="rect" href="main_8cpp.html#a90dc0c3192649d64ae885b62e6afa6e4" title="Processes temperature data from DS18B20 sensors." alt="" coords="117,263,303,288"/>
<area shape="poly" title=" " alt="" coords="56,295,107,287,107,293,57,300"/>
<area shape="rect" href="group__GeneralProcessing.html#gade56d6fce22a518b8feff1a150461f94" title="Prints or sends telemetry data logs based on the selected output format." alt="" coords="159,312,261,337"/>
<area shape="poly" title=" " alt="" coords="57,301,146,313,145,319,56,307"/>
<area shape="rect" href="group__GeneralProcessing.html#ga09f681954987d95f85831ca82365f987" title="Updates power and voltage data for all phases." alt="" coords="104,361,316,387"/>
<area shape="poly" title=" " alt="" coords="49,311,75,329,105,346,129,355,127,360,103,351,72,334,46,316"/>
<area shape="rect" href="group__GeneralProcessing.html#ga31f3d562faae6b598324b56299d74f7d" title="Checks and updates the diversion state based on the diversion pin." alt="" coords="615,5,773,31"/>
<area shape="poly" title=" " alt="" coords="234,154,292,125,363,95,492,58,610,31,611,36,493,63,365,101,294,130,236,158"/>
<area shape="rect" href="group__GeneralProcessing.html#ga5157f7f79cf8c75c2d7b41d8ed47a7ef" title="Forces all loads to full power if the override pin is active." alt="" coords="635,55,753,80"/>
<area shape="poly" title=" " alt="" coords="271,153,620,80,621,85,272,159"/>
<area shape="rect" href="group__GeneralProcessing.html#gab4774b22349c58cef345ad396aecc868" title="Handles load priorities and overriding logic." alt="" coords="364,149,552,189"/>
<area shape="poly" title=" " alt="" coords="295,166,350,166,350,171,295,171"/>
<area shape="rect" href="utils__pins_8h.html#aaec5db9d46ba784c4f16046e6deb6977" title="Toggle the specified pin." alt="" coords="417,213,499,239"/>
<area shape="poly" title=" " alt="" coords="266,179,404,211,403,216,265,184"/>
<area shape="rect" href="utils__pins_8h.html#a410a7bdd300104398ce91797bd936cdb" title="Get the Pin State." alt="" coords="891,80,989,105"/>
<area shape="poly" title=" " alt="" coords="748,28,789,39,891,73,889,78,787,45,746,33"/>
<area shape="rect" href="utils__pins_8h.html#abaa54130a12679d0dcc0e7578e0e4d37" title="Read the specified bit." alt="" coords="1120,80,1195,105"/>
<area shape="poly" title=" " alt="" coords="989,90,1106,90,1106,95,989,95"/>
<area shape="poly" title=" " alt="" coords="754,71,878,84,877,89,753,76"/>
<area shape="poly" title=" " alt="" coords="552,149,600,141,877,99,878,104,600,146,553,154"/>
<area shape="rect" href="group__GeneralProcessing.html#ga2b2ee7cd0a5810e272e1ffb0b5daf0ae" title="Handles load priorities and overriding during dual tariff periods." alt="" coords="600,155,788,195"/>
<area shape="poly" title=" " alt="" coords="552,169,586,170,586,175,552,174"/>
<area shape="rect" href="group__GeneralProcessing.html#ga9b9428fd01019319970f27b88bb1cf33" title="Proceeds with load priority rotation." alt="" coords="875,191,1005,216"/>
<area shape="poly" title=" " alt="" coords="519,186,600,205,669,211,739,213,862,208,862,213,739,218,669,216,600,210,518,191"/>
<area shape="poly" title=" " alt="" coords="753,153,887,107,889,112,755,158"/>
<area shape="poly" title=" " alt="" coords="788,183,862,192,862,197,788,189"/>
<area shape="rect" href="group__GeneralProcessing.html#gae473b1c0d80fe056d1fab9bdee38aca1" title="Prints the load priorities to the Serial output." alt="" coords="1092,191,1223,216"/>
<area shape="poly" title=" " alt="" coords="1005,201,1078,201,1078,206,1005,206"/>
<area shape="rect" href="utils__pins_8h.html#a23ed26b879b65f5ddf07facc1e4b18bc" title="Set the specified bit to 1." alt="" coords="661,271,727,296"/>
<area shape="poly" title=" " alt="" coords="500,233,648,270,647,275,499,238"/>
<area shape="rect" href="group__Telemetry.html#ga988b25d4a6361b7cc751a212af170665" title="Write telemetry data to Serial in EmonCMS format." alt="" coords="389,263,527,288"/>
<area shape="poly" title=" " alt="" coords="260,312,380,288,381,293,262,317"/>
<area shape="rect" href="group__Telemetry.html#gae46d07fd4694c49e10360b5d79163443" title="Prints data logs to the Serial output in text format." alt="" coords="390,312,526,337"/>
<area shape="poly" title=" " alt="" coords="261,322,376,322,376,327,261,327"/>
<area shape="rect" href="utils__rf_8h.html#ab5bc929f5a874ed02b16ed1d620d71cf" title="Send the logging data through RF." alt="" coords="405,361,511,387"/>
<area shape="poly" title=" " alt="" coords="262,332,392,358,391,363,260,337"/>
<area shape="rect" href="utils_8h.html#a5072aae7cb8a3f575605b65c6be56329" title="Sends telemetry data using the TeleInfo class." alt="" coords="383,411,533,436"/>
<area shape="poly" title=" " alt="" coords="262,327,290,335,317,346,333,359,342,372,351,384,365,396,381,403,378,408,363,400,347,388,338,375,329,362,315,351,288,340,260,333"/>
<area shape="rect" href="classTeleInfo.html#a37b1447161869bf3ecc2faed134b7eee" title="Finalizes the frame by adding the end character and sending the buffer over Serial." alt="" coords="621,361,767,387"/>
<area shape="poly" title=" " alt="" coords="519,408,618,387,620,392,520,413"/>
<area shape="rect" href="classTeleInfo.html#a4f418a8ad0164f7b10956c9186cdb345" title="Sends a telemetry value as an integer." alt="" coords="638,411,750,436"/>
<area shape="poly" title=" " alt="" coords="533,421,624,421,624,426,533,426"/>
<area shape="rect" href="classTeleInfo.html#ac3c9628b79d8f92c3d80dfdda4078e66" title="Initializes a new frame by resetting the buffer and adding the start character." alt="" coords="618,460,770,485"/>
<area shape="poly" title=" " alt="" coords="520,433,620,454,618,460,519,439"/>
<area shape="rect" href="classTeleInfo.html#a1f42b9e6aa9c3169b3ec469149e693a1" title="Calculates the checksum for a portion of the buffer." alt="" coords="836,385,1044,411"/>
<area shape="poly" title=" " alt="" coords="750,415,822,407,823,413,751,420"/>
<area shape="rect" href="classTeleInfo.html#aa3553828cf429c6a22eec47c1b4e0458" title="Writes a tag to the buffer." alt="" coords="872,435,1008,460"/>
<area shape="poly" title=" " alt="" coords="751,426,859,437,858,442,750,431"/>
</map>
</div>

</div>
</div>
<a id="gab4774b22349c58cef345ad396aecc868" name="gab4774b22349c58cef345ad396aecc868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4774b22349c58cef345ad396aecc868">&#9670;&#160;</a></span>proceedLoadPrioritiesAndOverriding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool proceedLoadPrioritiesAndOverriding </td>
          <td>(</td>
          <td class="paramtype">const int16_t &amp;</td>          <td class="paramname"><span class="paramname"><em>currentTemperature_x100</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles load priorities and overriding logic. </p>
<p>This function manages load priorities and overriding behavior based on the system configuration. It supports dual tariff handling, priority rotation, and manual override functionality.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentTemperature_x100</td><td>Current temperature multiplied by 100 (default to 0 if deactivated). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the system is in a high tariff (on-peak) period. </dd>
<dd>
false if the system is in a low tariff (off-peak) period.</dd></dl>
<ul>
<li>If dual tariff is enabled, it delegates to <code>proceedLoadPrioritiesAndOverridingDualTariff</code>.</li>
<li>If EmonESP control is enabled, it handles load rotation based on the rotation pin state.</li>
<li>If priority rotation is set to auto, it rotates priorities after a defined period of inactivity.</li>
<li>If the override pin is present, it forces all loads to full power when activated. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00319">319</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_gab4774b22349c58cef345ad396aecc868_cgraph.png" border="0" usemap="#agroup__GeneralProcessing_gab4774b22349c58cef345ad396aecc868_cgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_gab4774b22349c58cef345ad396aecc868_cgraph" id="agroup__GeneralProcessing_gab4774b22349c58cef345ad396aecc868_cgraph">
<area shape="rect" title="Handles load priorities and overriding logic." alt="" coords="5,25,193,65"/>
<area shape="rect" href="utils__pins_8h.html#a410a7bdd300104398ce91797bd936cdb" title="Get the Pin State." alt="" coords="493,5,591,31"/>
<area shape="poly" title=" " alt="" coords="174,22,241,10,294,6,335,6,429,10,480,12,480,17,429,15,335,11,294,11,242,15,175,27"/>
<area shape="rect" href="group__GeneralProcessing.html#ga2b2ee7cd0a5810e272e1ffb0b5daf0ae" title="Handles load priorities and overriding during dual tariff periods." alt="" coords="241,25,429,65"/>
<area shape="poly" title=" " alt="" coords="194,42,227,42,227,47,194,47"/>
<area shape="rect" href="group__GeneralProcessing.html#ga9b9428fd01019319970f27b88bb1cf33" title="Proceeds with load priority rotation." alt="" coords="477,59,607,84"/>
<area shape="poly" title=" " alt="" coords="175,62,242,74,294,78,335,78,429,74,464,73,464,78,429,79,335,84,294,84,241,79,174,67"/>
<area shape="rect" href="utils__pins_8h.html#abaa54130a12679d0dcc0e7578e0e4d37" title="Read the specified bit." alt="" coords="683,5,757,31"/>
<area shape="poly" title=" " alt="" coords="591,15,669,15,669,21,591,21"/>
<area shape="poly" title=" " alt="" coords="429,30,479,23,480,29,430,35"/>
<area shape="poly" title=" " alt="" coords="430,54,464,59,463,64,429,59"/>
<area shape="rect" href="group__GeneralProcessing.html#gae473b1c0d80fe056d1fab9bdee38aca1" title="Prints the load priorities to the Serial output." alt="" coords="655,59,785,84"/>
<area shape="poly" title=" " alt="" coords="607,69,641,69,641,74,607,74"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_gab4774b22349c58cef345ad396aecc868_icgraph.png" border="0" usemap="#agroup__GeneralProcessing_gab4774b22349c58cef345ad396aecc868_icgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_gab4774b22349c58cef345ad396aecc868_icgraph" id="agroup__GeneralProcessing_gab4774b22349c58cef345ad396aecc868_icgraph">
<area shape="rect" title="Handles load priorities and overriding logic." alt="" coords="323,5,511,45"/>
<area shape="rect" href="group__GeneralProcessing.html#ga143b5ab1cc611c04c761240ce5687fdd" title="Handles tasks that need to be executed every second." alt="" coords="104,13,275,38"/>
<area shape="poly" title=" " alt="" coords="309,28,275,28,275,23,309,23"/>
<area shape="rect" href="group__GeneralProcessing.html#gafe461d27b9c48d5921c00d521181f12f" title="Main processor loop." alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
</map>
</div>

</div>
</div>
<a id="ga2b2ee7cd0a5810e272e1ffb0b5daf0ae" name="ga2b2ee7cd0a5810e272e1ffb0b5daf0ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b2ee7cd0a5810e272e1ffb0b5daf0ae">&#9670;&#160;</a></span>proceedLoadPrioritiesAndOverridingDualTariff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool proceedLoadPrioritiesAndOverridingDualTariff </td>
          <td>(</td>
          <td class="paramtype">const int16_t &amp;</td>          <td class="paramname"><span class="paramname"><em>currentTemperature_x100</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles load priorities and overriding during dual tariff periods. </p>
<p>This function manages load priorities and overriding logic based on the dual tariff state and the current temperature. It ensures proper load behavior during off-peak and on-peak periods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentTemperature_x100</td><td>Current temperature multiplied by 100 (default to 0 if deactivated). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the system is in a high tariff (on-peak) period. </dd>
<dd>
false if the system is in a low tariff (off-peak) period.</dd></dl>
<ul>
<li>Detects transitions between off-peak and on-peak periods using the dual tariff pin.</li>
<li>During off-peak periods, manages load priorities and overrides based on elapsed time and temperature.</li>
<li>Logs transitions between tariff periods for debugging purposes. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00254">254</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_ga2b2ee7cd0a5810e272e1ffb0b5daf0ae_cgraph.png" border="0" usemap="#agroup__GeneralProcessing_ga2b2ee7cd0a5810e272e1ffb0b5daf0ae_cgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_ga2b2ee7cd0a5810e272e1ffb0b5daf0ae_cgraph" id="agroup__GeneralProcessing_ga2b2ee7cd0a5810e272e1ffb0b5daf0ae_cgraph">
<area shape="rect" title="Handles load priorities and overriding during dual tariff periods." alt="" coords="5,23,193,63"/>
<area shape="rect" href="utils__pins_8h.html#a410a7bdd300104398ce91797bd936cdb" title="Get the Pin State." alt="" coords="257,5,355,31"/>
<area shape="poly" title=" " alt="" coords="193,29,243,23,244,28,194,34"/>
<area shape="rect" href="group__GeneralProcessing.html#ga9b9428fd01019319970f27b88bb1cf33" title="Proceeds with load priority rotation." alt="" coords="241,55,371,80"/>
<area shape="poly" title=" " alt="" coords="194,52,228,56,227,61,193,57"/>
<area shape="rect" href="utils__pins_8h.html#abaa54130a12679d0dcc0e7578e0e4d37" title="Read the specified bit." alt="" coords="447,5,521,31"/>
<area shape="poly" title=" " alt="" coords="355,15,433,15,433,21,355,21"/>
<area shape="rect" href="group__GeneralProcessing.html#gae473b1c0d80fe056d1fab9bdee38aca1" title="Prints the load priorities to the Serial output." alt="" coords="419,55,549,80"/>
<area shape="poly" title=" " alt="" coords="371,65,405,65,405,70,371,70"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_ga2b2ee7cd0a5810e272e1ffb0b5daf0ae_icgraph.png" border="0" usemap="#agroup__GeneralProcessing_ga2b2ee7cd0a5810e272e1ffb0b5daf0ae_icgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_ga2b2ee7cd0a5810e272e1ffb0b5daf0ae_icgraph" id="agroup__GeneralProcessing_ga2b2ee7cd0a5810e272e1ffb0b5daf0ae_icgraph">
<area shape="rect" title="Handles load priorities and overriding during dual tariff periods." alt="" coords="559,5,747,45"/>
<area shape="rect" href="group__GeneralProcessing.html#gab4774b22349c58cef345ad396aecc868" title="Handles load priorities and overriding logic." alt="" coords="323,5,511,45"/>
<area shape="poly" title=" " alt="" coords="545,28,511,28,511,23,545,23"/>
<area shape="rect" href="group__GeneralProcessing.html#ga143b5ab1cc611c04c761240ce5687fdd" title="Handles tasks that need to be executed every second." alt="" coords="104,13,275,38"/>
<area shape="poly" title=" " alt="" coords="309,28,275,28,275,23,309,23"/>
<area shape="rect" href="group__GeneralProcessing.html#gafe461d27b9c48d5921c00d521181f12f" title="Main processor loop." alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
</map>
</div>

</div>
</div>
<a id="ga9b9428fd01019319970f27b88bb1cf33" name="ga9b9428fd01019319970f27b88bb1cf33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b9428fd01019319970f27b88bb1cf33">&#9670;&#160;</a></span>proceedRotation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proceedRotation </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Proceeds with load priority rotation. </p>
<p>This function triggers the rotation of load priorities and waits until the rotation is completed. It ensures that the new load priorities are logged after the rotation.</p>
<ul>
<li>Sets the <code>b_reOrderLoads</code> flag to initiate the rotation process.</li>
<li>Waits in a loop until the rotation is completed by the ISR.</li>
<li>Logs the updated load priorities after the rotation. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00223">223</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_ga9b9428fd01019319970f27b88bb1cf33_cgraph.png" border="0" usemap="#agroup__GeneralProcessing_ga9b9428fd01019319970f27b88bb1cf33_cgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_ga9b9428fd01019319970f27b88bb1cf33_cgraph" id="agroup__GeneralProcessing_ga9b9428fd01019319970f27b88bb1cf33_cgraph">
<area shape="rect" title="Proceeds with load priority rotation." alt="" coords="5,5,135,31"/>
<area shape="rect" href="group__GeneralProcessing.html#gae473b1c0d80fe056d1fab9bdee38aca1" title="Prints the load priorities to the Serial output." alt="" coords="183,5,313,31"/>
<area shape="poly" title=" " alt="" coords="135,15,169,15,169,21,135,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_ga9b9428fd01019319970f27b88bb1cf33_icgraph.png" border="0" usemap="#agroup__GeneralProcessing_ga9b9428fd01019319970f27b88bb1cf33_icgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_ga9b9428fd01019319970f27b88bb1cf33_icgraph" id="agroup__GeneralProcessing_ga9b9428fd01019319970f27b88bb1cf33_icgraph">
<area shape="rect" title="Proceeds with load priority rotation." alt="" coords="795,13,924,38"/>
<area shape="rect" href="group__GeneralProcessing.html#gab4774b22349c58cef345ad396aecc868" title="Handles load priorities and overriding logic." alt="" coords="323,5,511,45"/>
<area shape="poly" title=" " alt="" coords="781,25,747,24,559,24,511,25,511,20,559,19,747,19,781,20"/>
<area shape="rect" href="group__GeneralProcessing.html#ga2b2ee7cd0a5810e272e1ffb0b5daf0ae" title="Handles load priorities and overriding during dual tariff periods." alt="" coords="559,33,747,73"/>
<area shape="poly" title=" " alt="" coords="782,39,747,43,747,38,781,33"/>
<area shape="rect" href="group__GeneralProcessing.html#ga143b5ab1cc611c04c761240ce5687fdd" title="Handles tasks that need to be executed every second." alt="" coords="104,13,275,38"/>
<area shape="poly" title=" " alt="" coords="309,28,275,28,275,23,309,23"/>
<area shape="rect" href="group__GeneralProcessing.html#gafe461d27b9c48d5921c00d521181f12f" title="Main processor loop." alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="545,43,511,39,511,34,545,38"/>
</map>
</div>

</div>
</div>
<a id="gade56d6fce22a518b8feff1a150461f94" name="gade56d6fce22a518b8feff1a150461f94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gade56d6fce22a518b8feff1a150461f94">&#9670;&#160;</a></span>sendResults()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sendResults </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>bOffPeak</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prints or sends telemetry data logs based on the selected output format. </p>
<p>This function handles the transmission of telemetry data in various formats, such as human-readable text, IoT telemetry, or EmonCMS format. It also ensures that the first incomplete datalogging event is skipped during startup.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bOffPeak</td><td>Indicates whether the system is in an off-peak tariff period.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>If RF communication is enabled, it sends RF data.</li>
<li>Depending on the <code>SERIAL_OUTPUT_TYPE</code>, it prints data in text format, sends telemetry data, or outputs data in EmonCMS format.</li>
<li>Skips the first datalogging event during startup to avoid incomplete data. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="utils_8h_source.html#l00410">410</a> of file <a class="el" href="utils_8h_source.html">utils.h</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_gade56d6fce22a518b8feff1a150461f94_cgraph.png" border="0" usemap="#agroup__GeneralProcessing_gade56d6fce22a518b8feff1a150461f94_cgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_gade56d6fce22a518b8feff1a150461f94_cgraph" id="agroup__GeneralProcessing_gade56d6fce22a518b8feff1a150461f94_cgraph">
<area shape="rect" title="Prints or sends telemetry data logs based on the selected output format." alt="" coords="5,80,107,105"/>
<area shape="rect" href="group__Telemetry.html#ga988b25d4a6361b7cc751a212af170665" title="Write telemetry data to Serial in EmonCMS format." alt="" coords="160,5,299,31"/>
<area shape="poly" title=" " alt="" coords="78,78,154,40,171,33,173,38,156,44,80,82"/>
<area shape="rect" href="group__Telemetry.html#gae46d07fd4694c49e10360b5d79163443" title="Prints data logs to the Serial output in text format." alt="" coords="161,55,297,80"/>
<area shape="poly" title=" " alt="" coords="106,83,147,77,148,82,107,88"/>
<area shape="rect" href="utils__rf_8h.html#ab5bc929f5a874ed02b16ed1d620d71cf" title="Send the logging data through RF." alt="" coords="176,104,283,129"/>
<area shape="poly" title=" " alt="" coords="107,97,163,105,162,110,106,102"/>
<area shape="rect" href="utils_8h.html#a5072aae7cb8a3f575605b65c6be56329" title="Sends telemetry data using the TeleInfo class." alt="" coords="155,153,304,179"/>
<area shape="poly" title=" " alt="" coords="82,103,156,138,176,146,174,151,154,143,80,108"/>
<area shape="rect" href="classTeleInfo.html#a37b1447161869bf3ecc2faed134b7eee" title="Finalizes the frame by adding the end character and sending the buffer over Serial." alt="" coords="355,104,501,129"/>
<area shape="poly" title=" " alt="" coords="280,151,362,130,364,135,282,156"/>
<area shape="rect" href="classTeleInfo.html#a4f418a8ad0164f7b10956c9186cdb345" title="Sends a telemetry value as an integer." alt="" coords="372,153,484,179"/>
<area shape="poly" title=" " alt="" coords="304,163,358,163,358,169,304,169"/>
<area shape="rect" href="classTeleInfo.html#ac3c9628b79d8f92c3d80dfdda4078e66" title="Initializes a new frame by resetting the buffer and adding the start character." alt="" coords="352,203,504,228"/>
<area shape="poly" title=" " alt="" coords="282,176,364,197,362,202,280,181"/>
<area shape="rect" href="classTeleInfo.html#a1f42b9e6aa9c3169b3ec469149e693a1" title="Calculates the checksum for a portion of the buffer." alt="" coords="552,129,760,155"/>
<area shape="poly" title=" " alt="" coords="484,157,538,152,538,157,485,163"/>
<area shape="rect" href="classTeleInfo.html#aa3553828cf429c6a22eec47c1b4e0458" title="Writes a tag to the buffer." alt="" coords="588,179,724,204"/>
<area shape="poly" title=" " alt="" coords="485,170,575,180,574,185,484,175"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_gade56d6fce22a518b8feff1a150461f94_icgraph.png" border="0" usemap="#agroup__GeneralProcessing_gade56d6fce22a518b8feff1a150461f94_icgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_gade56d6fce22a518b8feff1a150461f94_icgraph" id="agroup__GeneralProcessing_gade56d6fce22a518b8feff1a150461f94_icgraph">
<area shape="rect" title="Prints or sends telemetry data logs based on the selected output format." alt="" coords="104,5,205,31"/>
<area shape="rect" href="group__GeneralProcessing.html#gafe461d27b9c48d5921c00d521181f12f" title="Main processor loop." alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,56,21,56,15,90,15"/>
</map>
</div>

</div>
</div>
<a id="ga09f681954987d95f85831ca82365f987" name="ga09f681954987d95f85831ca82365f987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga09f681954987d95f85831ca82365f987">&#9670;&#160;</a></span>updatePowerAndVoltageData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updatePowerAndVoltageData </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates power and voltage data for all phases. </p>
<p>This function calculates the power and voltage for each phase based on the accumulated data during the datalogging period. It also updates the total power.</p>
<ul>
<li>Computes the power for each phase using the accumulated power data and calibration factors.</li>
<li>Calculates the RMS voltage for each phase using the accumulated voltage squared data.</li>
<li>Updates the total power by summing the power of all phases. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00417">417</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__GeneralProcessing_ga09f681954987d95f85831ca82365f987_icgraph.png" border="0" usemap="#agroup__GeneralProcessing_ga09f681954987d95f85831ca82365f987_icgraph" alt=""/></div>
<map name="agroup__GeneralProcessing_ga09f681954987d95f85831ca82365f987_icgraph" id="agroup__GeneralProcessing_ga09f681954987d95f85831ca82365f987_icgraph">
<area shape="rect" title="Updates power and voltage data for all phases." alt="" coords="104,5,316,31"/>
<area shape="rect" href="group__GeneralProcessing.html#gafe461d27b9c48d5921c00d521181f12f" title="Main processor loop." alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,56,21,56,15,90,15"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
