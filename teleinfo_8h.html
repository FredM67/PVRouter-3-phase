<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>3-phase PV router: Mk2_3phase_RFdatalog_temp/teleinfo.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">3-phase PV router
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_7941a5df981581ef513b158e7bb3820e.html">Mk2_3phase_RFdatalog_temp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">teleinfo.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &quot;<a class="el" href="config__system_8h_source.html">config_system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_8h_source.html">config.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for teleinfo.h:</div>
<div class="dyncontent">
<div class="center"><img src="teleinfo_8h__incl.png" border="0" usemap="#aMk2__3phase__RFdatalog__temp_2teleinfo_8h" alt=""/></div>
<map name="aMk2__3phase__RFdatalog__temp_2teleinfo_8h" id="aMk2__3phase__RFdatalog__temp_2teleinfo_8h">
<area shape="rect" title=" " alt="" coords="2333,5,2511,45"/>
<area shape="rect" title=" " alt="" coords="2624,394,2708,419"/>
<area shape="rect" href="config__system_8h.html" title="Basic configuration values to be set by the end&#45;user." alt="" coords="1826,240,1954,265"/>
<area shape="rect" href="config_8h.html" title="Configuration values to be set by the end&#45;user." alt="" coords="2385,93,2459,119"/>
<area shape="rect" href="type__traits_8hpp.html" title="Some useful but missing stl functions templates." alt="" coords="1493,313,1613,339"/>
<area shape="rect" href="conditional_8hpp.html" title=" " alt="" coords="2404,394,2600,419"/>
<area shape="rect" href="decay_8hpp.html" title=" " alt="" coords="5,394,167,419"/>
<area shape="rect" href="enable__if_8hpp.html" title=" " alt="" coords="191,387,331,427"/>
<area shape="rect" href="function__traits_8hpp.html" title=" " alt="" coords="355,387,505,427"/>
<area shape="rect" href="integral__constant_8hpp.html" title=" " alt="" coords="1477,621,1623,661"/>
<area shape="rect" href="is__array_8hpp.html" title=" " alt="" coords="529,394,704,419"/>
<area shape="rect" href="is__base__of_8hpp.html" title=" " alt="" coords="780,387,925,427"/>
<area shape="rect" href="remove__reference_8hpp.html" title=" " alt="" coords="348,475,517,500"/>
<area shape="rect" href="is__class_8hpp.html" title=" " alt="" coords="541,475,716,500"/>
<area shape="rect" href="is__const_8hpp.html" title=" " alt="" coords="2009,548,2187,573"/>
<area shape="rect" href="is__convertible_8hpp.html" title=" " alt="" coords="740,475,955,500"/>
<area shape="rect" href="is__enum_8hpp.html" title=" " alt="" coords="1051,394,1230,419"/>
<area shape="rect" href="is__floating__point_8hpp.html" title=" " alt="" coords="1030,475,1187,500"/>
<area shape="rect" href="is__same_8hpp.html" title=" " alt="" coords="1211,548,1315,573"/>
<area shape="rect" href="is__integral_8hpp.html" title=" " alt="" coords="1212,475,1331,500"/>
<area shape="rect" href="is__pointer_8hpp.html" title=" " alt="" coords="1587,548,1774,573"/>
<area shape="rect" href="is__signed_8hpp.html" title=" " alt="" coords="1407,475,1592,500"/>
<area shape="rect" href="is__unsigned_8hpp.html" title=" " alt="" coords="1616,475,1817,500"/>
<area shape="rect" href="make__unsigned_8hpp.html" title=" " alt="" coords="1693,394,1919,419"/>
<area shape="rect" href="remove__const_8hpp.html" title=" " alt="" coords="2045,387,2191,427"/>
<area shape="rect" href="void__t_8hpp.html" title=" " alt="" coords="2216,394,2380,419"/>
<area shape="rect" title=" " alt="" coords="149,475,223,500"/>
<area shape="rect" href="declval_8hpp.html" title=" " alt="" coords="689,548,787,573"/>
<area shape="rect" href="remove__cv_8hpp.html" title=" " alt="" coords="1340,548,1461,573"/>
<area shape="rect" href="type__identity_8hpp.html" title=" " alt="" coords="1799,548,1933,573"/>
<area shape="rect" href="debug_8h.html" title="Some macro for the Serial Output and Debugging." alt="" coords="2451,240,2526,265"/>
<area shape="rect" href="types_8h.html" title="Some basics classes/types." alt="" coords="2356,240,2427,265"/>
<area shape="rect" href="utils__dualtariff_8h.html" title="Some utility functions for dual tariff feature." alt="" coords="2571,167,2699,192"/>
<area shape="rect" href="utils__relay_8h.html" title="Some utility functions for the relay output feature." alt="" coords="2191,167,2291,192"/>
<area shape="rect" href="utils__temp_8h.html" title="Some utility functions for temperature sensor(s)" alt="" coords="2551,240,2653,265"/>
<area shape="rect" href="constants_8h.html" title="Some constants." alt="" coords="2505,313,2603,339"/>
<area shape="rect" href="movingAvg_8h.html" title="Code for sliding&#45;window average." alt="" coords="2079,240,2186,265"/>
<area shape="rect" href="ewma__avg_8hpp.html" title="This file implements an Exponentially Weighted Moving Average template class." alt="" coords="2211,240,2332,265"/>
<area shape="rect" href="utils__pins_8h.html" title="Some utility functions for pins manipulation." alt="" coords="2090,313,2186,339"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="teleinfo_8h__dep__incl.png" border="0" usemap="#aMk2__3phase__RFdatalog__temp_2teleinfo_8hdep" alt=""/></div>
<map name="aMk2__3phase__RFdatalog__temp_2teleinfo_8hdep" id="aMk2__3phase__RFdatalog__temp_2teleinfo_8hdep">
<area shape="rect" title=" " alt="" coords="5,5,183,45"/>
<area shape="rect" href="utils_8h.html" title="Some utility functions." alt="" coords="5,93,183,133"/>
<area shape="rect" href="main_8cpp.html" title="Main code." alt="" coords="5,181,183,221"/>
</map>
</div>
</div>
<p><a href="teleinfo_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTeleInfo.html">TeleInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class for managing and sending telemetry information in a specific frame format.  <a href="classTeleInfo.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a820a2f759b537f10c0543d9612390e8c"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="teleinfo_8h.html#a820a2f759b537f10c0543d9612390e8c">calcBufferSize</a> ()</td></tr>
<tr class="memdesc:a820a2f759b537f10c0543d9612390e8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the total buffer size required for the telemetry frame.  <br /></td></tr>
<tr class="separator:a820a2f759b537f10c0543d9612390e8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9a3eeacd11602f3385056e620652bb7"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="teleinfo_8h.html#aa9a3eeacd11602f3385056e620652bb7">lineSize</a> (size_t tagLen, size_t valueLen)</td></tr>
<tr class="memdesc:aa9a3eeacd11602f3385056e620652bb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the size of a single telemetry line in the frame.  <br /></td></tr>
<tr class="separator:aa9a3eeacd11602f3385056e620652bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a820a2f759b537f10c0543d9612390e8c" name="a820a2f759b537f10c0543d9612390e8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a820a2f759b537f10c0543d9612390e8c">&#9670;&#160;</a></span>calcBufferSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr size_t calcBufferSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the total buffer size required for the telemetry frame. </p>
<p>This function computes the size of the buffer needed to store the entire telemetry frame, including all tags, values, and formatting characters. The calculation takes into account the presence of optional features such as relay diversion and temperature sensing.</p>
<dl class="section return"><dt>Returns</dt><dd>The total buffer size as a compile-time constant.</dd></dl>
<p>The buffer size is calculated as follows:</p><ul>
<li>1 byte for the start-of-text (STX) character.</li>
<li>1 line for the "P" tag (signed 6 digits).</li>
<li>For multi-phase systems (<code>NO_OF_PHASES &gt; 1</code>):<ul>
<li><code>NO_OF_PHASES</code> lines for the "Vn" tag (unsigned 5 digits each).</li>
</ul>
</li>
<li>For single-phase systems:<ul>
<li>1 line for the "D" tag (unsigned 4 digits).</li>
<li>1 line for the "E" tag (unsigned 5 digits).</li>
</ul>
</li>
<li>If relay diversion is enabled (<code>RELAY_DIVERSION</code>):<ul>
<li>1 line for the "R" tag (signed 6 digits).</li>
<li><code>relays.get_size()</code> lines for relay states ("R1" to "Rn", 1 digit each).</li>
</ul>
</li>
<li>If temperature sensors are present (<code>TEMP_SENSOR_PRESENT</code>):<ul>
<li><code>temperatureSensing.get_size()</code> lines for temperature tags ("T1" to "Tn", 4 digits each).</li>
</ul>
</li>
<li>1 line for the "N" tag (unsigned 5 digits).</li>
<li>1 byte for the end-of-text (ETX) character. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="teleinfo_8h_source.html#l00056">56</a> of file <a class="el" href="teleinfo_8h_source.html">teleinfo.h</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="teleinfo_8h_a820a2f759b537f10c0543d9612390e8c_cgraph.png" border="0" usemap="#ateleinfo_8h_a820a2f759b537f10c0543d9612390e8c_cgraph" alt=""/></div>
<map name="ateleinfo_8h_a820a2f759b537f10c0543d9612390e8c_cgraph" id="ateleinfo_8h_a820a2f759b537f10c0543d9612390e8c_cgraph">
<area shape="rect" title="Calculates the total buffer size required for the telemetry frame." alt="" coords="5,92,120,117"/>
<area shape="rect" href="classRelayEngine.html#a1ed9500ebf4f6d7afb519c377fab42d3" title="Get the number of relays." alt="" coords="168,5,333,31"/>
<area shape="rect" href="classTemperatureSensing.html#a2ee48e23ceaf2bbc08cc4be575bb7d90" title="Get the number of sensors." alt="" coords="173,55,328,95"/>
<area shape="rect" href="teleinfo_8h.html#aa9a3eeacd11602f3385056e620652bb7" title="Calculates the size of a single telemetry line in the frame." alt="" coords="214,120,287,145"/>
<area shape="rect" href="types_8h.html#a694147b7171ec0b06bc8880dc100e756" title="Helper function to retrieve the dimension of a C&#45;array." alt="" coords="227,169,275,195"/>
</map>
</div>

</div>
</div>
<a id="aa9a3eeacd11602f3385056e620652bb7" name="aa9a3eeacd11602f3385056e620652bb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9a3eeacd11602f3385056e620652bb7">&#9670;&#160;</a></span>lineSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr size_t lineSize </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>tagLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>valueLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the size of a single telemetry line in the frame. </p>
<p>This function computes the size of a single line in the telemetry frame, including the tag, value, and formatting characters. Each line consists of:</p><ul>
<li>1 byte for the Line Feed (LF) character.</li>
<li><code>tagLen</code> bytes for the tag.</li>
<li>1 byte for the Tab (TAB) character separating the tag and value.</li>
<li><code>valueLen</code> bytes for the value.</li>
<li>1 byte for the Tab (TAB) character separating the value and checksum.</li>
<li>1 byte for the checksum.</li>
<li>1 byte for the Carriage Return (CR) character.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tagLen</td><td>The length of the tag in bytes. </td></tr>
    <tr><td class="paramname">valueLen</td><td>The length of the value in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total size of the line in bytes. </dd></dl>

<p class="definition">Definition at line <a class="el" href="teleinfo_8h_source.html#l00026">26</a> of file <a class="el" href="teleinfo_8h_source.html">teleinfo.h</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="teleinfo_8h_aa9a3eeacd11602f3385056e620652bb7_icgraph.png" border="0" usemap="#ateleinfo_8h_aa9a3eeacd11602f3385056e620652bb7_icgraph" alt=""/></div>
<map name="ateleinfo_8h_aa9a3eeacd11602f3385056e620652bb7_icgraph" id="ateleinfo_8h_aa9a3eeacd11602f3385056e620652bb7_icgraph">
<area shape="rect" title="Calculates the size of a single telemetry line in the frame." alt="" coords="168,5,241,31"/>
<area shape="rect" href="teleinfo_8h.html#a820a2f759b537f10c0543d9612390e8c" title="Calculates the total buffer size required for the telemetry frame." alt="" coords="5,5,120,31"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
