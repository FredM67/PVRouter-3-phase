<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>3-phase PV router: Mk2_3phase_RFdatalog_temp/ewma_avg.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">3-phase PV router
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_7941a5df981581ef513b158e7bb3820e.html">Mk2_3phase_RFdatalog_temp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ewma_avg.hpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file implements an Exponentially Weighted Moving Average template class.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &quot;<a class="el" href="type__traits_8hpp_source.html">type_traits.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ewma_avg.hpp:</div>
<div class="dyncontent">
<div class="center"><img src="ewma__avg_8hpp__incl.png" border="0" usemap="#aMk2__3phase__RFdatalog__temp_2ewma__avg_8hpp" alt=""/></div>
<map name="aMk2__3phase__RFdatalog__temp_2ewma__avg_8hpp" id="aMk2__3phase__RFdatalog__temp_2ewma__avg_8hpp">
<area shape="rect" title="This file implements an Exponentially Weighted Moving Average template class." alt="" coords="1024,5,1201,47"/>
<area shape="rect" title=" " alt="" coords="1008,95,1092,121"/>
<area shape="rect" href="type__traits_8hpp.html" title="Some useful but missing stl functions templates." alt="" coords="1117,95,1237,121"/>
<area shape="rect" href="conditional_8hpp.html" title=" " alt="" coords="5,177,201,203"/>
<area shape="rect" href="enable__if_8hpp.html" title=" " alt="" coords="225,169,365,211"/>
<area shape="rect" href="integral__constant_8hpp.html" title=" " alt="" coords="1407,408,1554,449"/>
<area shape="rect" href="is__array_8hpp.html" title=" " alt="" coords="389,177,564,203"/>
<area shape="rect" href="is__base__of_8hpp.html" title=" " alt="" coords="588,169,733,211"/>
<area shape="rect" href="remove__reference_8hpp.html" title=" " alt="" coords="239,259,408,285"/>
<area shape="rect" href="is__class_8hpp.html" title=" " alt="" coords="432,259,607,285"/>
<area shape="rect" href="is__const_8hpp.html" title=" " alt="" coords="1940,333,2117,360"/>
<area shape="rect" href="is__convertible_8hpp.html" title=" " alt="" coords="631,259,845,285"/>
<area shape="rect" href="is__enum_8hpp.html" title=" " alt="" coords="910,177,1089,203"/>
<area shape="rect" href="is__floating__point_8hpp.html" title=" " alt="" coords="921,259,1078,285"/>
<area shape="rect" href="is__same_8hpp.html" title=" " alt="" coords="1142,333,1246,360"/>
<area shape="rect" href="is__integral_8hpp.html" title=" " alt="" coords="1103,259,1221,285"/>
<area shape="rect" href="is__pointer_8hpp.html" title=" " alt="" coords="1518,333,1705,360"/>
<area shape="rect" href="is__signed_8hpp.html" title=" " alt="" coords="1297,259,1483,285"/>
<area shape="rect" href="is__unsigned_8hpp.html" title=" " alt="" coords="1507,259,1708,285"/>
<area shape="rect" href="make__unsigned_8hpp.html" title=" " alt="" coords="1638,177,1865,203"/>
<area shape="rect" href="make__void_8hpp.html" title=" " alt="" coords="1990,177,2185,203"/>
<area shape="rect" href="remove__const_8hpp.html" title=" " alt="" coords="2209,169,2355,211"/>
<area shape="rect" title=" " alt="" coords="139,259,214,285"/>
<area shape="rect" href="declval_8hpp.html" title=" " alt="" coords="580,333,677,360"/>
<area shape="rect" href="remove__cv_8hpp.html" title=" " alt="" coords="1271,333,1392,360"/>
<area shape="rect" href="type__identity_8hpp.html" title=" " alt="" coords="1729,333,1864,360"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ewma__avg_8hpp__dep__incl.png" border="0" usemap="#aMk2__3phase__RFdatalog__temp_2ewma__avg_8hppdep" alt=""/></div>
<map name="aMk2__3phase__RFdatalog__temp_2ewma__avg_8hppdep" id="aMk2__3phase__RFdatalog__temp_2ewma__avg_8hppdep">
<area shape="rect" title="This file implements an Exponentially Weighted Moving Average template class." alt="" coords="560,5,737,47"/>
<area shape="rect" href="utils__relay_8h.html" title="Some utility functions for the relay output feature." alt="" coords="560,95,737,136"/>
<area shape="rect" href="config_8h.html" title="Configuration values to be set by the end&#45;user." alt="" coords="472,184,649,225"/>
<area shape="rect" href="main_8cpp.html" title="Main code." alt="" coords="471,452,648,493"/>
<area shape="rect" href="calibration_8h.html" title="Calibration values definition." alt="" coords="5,273,183,315"/>
<area shape="rect" href="dualtariff_8h.html" title="Classes/types needed for dual&#45;tariff support." alt="" coords="207,273,384,315"/>
<area shape="rect" href="processing_8h.html" title="Public functions/variables of processing engine." alt="" coords="408,273,585,315"/>
<area shape="rect" href="validation_8h.html" title="Compile&#45;time validations." alt="" coords="535,363,712,404"/>
<area shape="rect" href="processing_8cpp.html" title="Implements the processing engine." alt="" coords="80,363,257,404"/>
<area shape="rect" href="utils_8h.html" title="Some utility functions." alt="" coords="281,363,459,404"/>
</map>
</div>
</div>
<p><a href="ewma__avg_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEWMA__average.html">EWMA_average&lt; A &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exponentially Weighted Moving Average.  <a href="classEWMA__average.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab2d65d6104cd09368e1b72bb4342cae5"><td class="memItemLeft" align="right" valign="top">constexpr uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ewma__avg_8hpp.html#ab2d65d6104cd09368e1b72bb4342cae5">round_up_to_power_of_2</a> (<a class="el" href="config__system_8h.html#a3180c835bce68b1c59f64f4055088cca">uint16_t</a> v)</td></tr>
<tr class="memdesc:ab2d65d6104cd09368e1b72bb4342cae5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper compile-time function to retrieve the previous power of 2 of the given number (120 =&gt; 64 =&gt; 6)  <a href="ewma__avg_8hpp.html#ab2d65d6104cd09368e1b72bb4342cae5">More...</a><br /></td></tr>
<tr class="separator:ab2d65d6104cd09368e1b72bb4342cae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file implements an Exponentially Weighted Moving Average template class. </p>
<dl class="section author"><dt>Author</dt><dd>Frédéric Metrich (<a href="#" onclick="location.href='mai'+'lto:'+'fre'+'de'+'ric'+'.m'+'etr'+'ic'+'h@l'+'iv'+'e.f'+'r'; return false;">frede<span style="display: none;">.nosp@m.</span>ric.<span style="display: none;">.nosp@m.</span>metri<span style="display: none;">.nosp@m.</span>ch@l<span style="display: none;">.nosp@m.</span>ive.f<span style="display: none;">.nosp@m.</span>r</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024-02-27</dd></dl>
<h1><a class="anchor" id="description"></a>
Description</h1>
<p>The Exponentially Weighted Moving Average (EWMA) is a quantitative or statistical measure used to model or describe a time series. The EWMA is widely used in finance, the main applications being technical analysis and volatility modeling.</p>
<p>The moving average is designed as such that older observations are given lower weights. The weights fall exponentially as the data point gets older – hence the name exponentially weighted.</p>
<p>The only decision a user of the EWMA must make is the parameter alpha. The parameter decides how important the current observation is in the calculation of the EWMA. The higher the value of alpha, the more closely the EWMA tracks the original time series.</p>
<p>Computation of DEMA (Double EMA) with half-alpha has been added to get a better response of the average, especially when "peak inputs" are recorded.</p>
<p>Computation of TEMA (Triple EMA) with quarter-alpha has been added to get a even better response of the average, especially when "peak inputs" are recorded. This seems to be the "optimal" solution.</p>
<h1><a class="anchor" id="note"></a>
Note</h1>
<p>This class is implemented in way to use only integer math. This comes with some restrictions on the alpha parameter, but the benefit of full integer math wins on the side-drawback.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2024 </dd></dl>

<p class="definition">Definition in file <a class="el" href="ewma__avg_8hpp_source.html">ewma_avg.hpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ab2d65d6104cd09368e1b72bb4342cae5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2d65d6104cd09368e1b72bb4342cae5">&#9670;&nbsp;</a></span>round_up_to_power_of_2()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint8_t round_up_to_power_of_2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="config__system_8h.html#a3180c835bce68b1c59f64f4055088cca">uint16_t</a>&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper compile-time function to retrieve the previous power of 2 of the given number (120 =&gt; 64 =&gt; 6) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>The input number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>constexpr uint8_t The next power of two </dd></dl>

<p class="definition">Definition at line <a class="el" href="ewma__avg_8hpp_source.html#l00047">47</a> of file <a class="el" href="ewma__avg_8hpp_source.html">ewma_avg.hpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ewma__avg_8hpp_ab2d65d6104cd09368e1b72bb4342cae5_icgraph.png" border="0" usemap="#aewma__avg_8hpp_ab2d65d6104cd09368e1b72bb4342cae5_icgraph" alt=""/></div>
<map name="aewma__avg_8hpp_ab2d65d6104cd09368e1b72bb4342cae5_icgraph" id="aewma__avg_8hpp_ab2d65d6104cd09368e1b72bb4342cae5_icgraph">
<area shape="rect" title="Helper compile&#45;time function to retrieve the previous power of 2 of the given number (120 =&gt; 64 =&gt; 6)" alt="" coords="245,5,429,32"/>
<area shape="rect" href="classEWMA__average.html#a208b9b3d82809466b4d90aedb3c7e4db" title="Add a new value and actualize the EMA, DEMA and TEMA." alt="" coords="5,5,197,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
