<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>3-phase PV router: RelayEngine&lt; N, D &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">3-phase PV router
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classRelayEngine-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">RelayEngine&lt; N, D &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__RelayDiversion.html">Relay diversion feature</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Manages a collection of relays and their behavior based on surplus and import thresholds.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for RelayEngine&lt; N, D &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classRelayEngine__coll__graph.png" border="0" usemap="#aRelayEngine_3_01N_00_01D_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="aRelayEngine_3_01N_00_01D_01_4_coll__map" id="aRelayEngine_3_01N_00_01D_01_4_coll__map">
<area shape="rect" title="Manages a collection of relays and their behavior based on surplus and import thresholds." alt="" coords="7,211,169,236"/>
<area shape="rect" href="classrelayOutput.html" title="Represents a single relay configuration and its behavior." alt="" coords="5,115,104,141"/>
<area shape="poly" title=" " alt="" coords="66,152,86,210,81,211,61,154"/>
<area shape="rect" href="classEWMA__average.html" title=" " alt="" coords="129,108,378,148"/>
<area shape="poly" title=" " alt="" coords="209,157,110,213,107,208,207,152"/>
<area shape="rect" href="classEWMA__average.html" title="Implements an Exponentially Weighted Moving Average (EWMA)." alt="" coords="172,5,335,31"/>
<area shape="poly" title=" " alt="" coords="256,45,256,108,251,108,251,45"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa834d2148c13bbf4c63f949033746ecd" id="r_aa834d2148c13bbf4c63f949033746ecd"><td class="memItemLeft" align="right" valign="top">constexpr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa834d2148c13bbf4c63f949033746ecd">RelayEngine</a> (const <a class="el" href="classrelayOutput.html">relayOutput</a>(&amp;ref)[N])</td></tr>
<tr class="memdesc:aa834d2148c13bbf4c63f949033746ecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a list of relays.  <br /></td></tr>
<tr class="separator:aa834d2148c13bbf4c63f949033746ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a926eff34f40ee3e7d7132ba4cb693d40" id="r_a926eff34f40ee3e7d7132ba4cb693d40"><td class="memItemLeft" align="right" valign="top">constexpr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a926eff34f40ee3e7d7132ba4cb693d40">RelayEngine</a> (<a class="el" href="structintegral__constant.html">integral_constant</a>&lt; uint8_t, D &gt; ic, const <a class="el" href="classrelayOutput.html">relayOutput</a>(&amp;ref)[N])</td></tr>
<tr class="memdesc:a926eff34f40ee3e7d7132ba4cb693d40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a list of relays with a custom sliding average.  <br /></td></tr>
<tr class="separator:a926eff34f40ee3e7d7132ba4cb693d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a981b20422ed19d2aa87d042c583173ee" id="r_a981b20422ed19d2aa87d042c583173ee"><td class="memItemLeft" align="right" valign="top">constexpr const auto &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a981b20422ed19d2aa87d042c583173ee">get_relay</a> (uint8_t idx) const</td></tr>
<tr class="memdesc:a981b20422ed19d2aa87d042c583173ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the relay object.  <br /></td></tr>
<tr class="separator:a981b20422ed19d2aa87d042c583173ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ed9500ebf4f6d7afb519c377fab42d3" id="r_a1ed9500ebf4f6d7afb519c377fab42d3"><td class="memItemLeft" align="right" valign="top">constexpr auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ed9500ebf4f6d7afb519c377fab42d3">get_size</a> () const</td></tr>
<tr class="memdesc:a1ed9500ebf4f6d7afb519c377fab42d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of relays.  <br /></td></tr>
<tr class="separator:a1ed9500ebf4f6d7afb519c377fab42d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f831b566b2da140a17333ab6a39e5dc" id="r_a4f831b566b2da140a17333ab6a39e5dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f831b566b2da140a17333ab6a39e5dc">inc_duration</a> () const</td></tr>
<tr class="memdesc:a4f831b566b2da140a17333ab6a39e5dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment the duration's state of each relay.  <br /></td></tr>
<tr class="separator:a4f831b566b2da140a17333ab6a39e5dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ff0ac83bf3a665174f0ea373974e3a" id="r_ab3ff0ac83bf3a665174f0ea373974e3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab3ff0ac83bf3a665174f0ea373974e3a">printConfiguration</a> () const</td></tr>
<tr class="memdesc:ab3ff0ac83bf3a665174f0ea373974e3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the configuration of each relay.  <br /></td></tr>
<tr class="separator:ab3ff0ac83bf3a665174f0ea373974e3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2891986bc989d9c35301711f674bc523" id="r_a2891986bc989d9c35301711f674bc523"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2891986bc989d9c35301711f674bc523">proceed_relays</a> () const</td></tr>
<tr class="memdesc:a2891986bc989d9c35301711f674bc523"><td class="mdescLeft">&#160;</td><td class="mdescRight">Proceed all relays in increasing order (surplus) or decreasing order (import).  <br /></td></tr>
<tr class="separator:a2891986bc989d9c35301711f674bc523"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a2c586921b020480449159786461195aa" id="r_a2c586921b020480449159786461195aa"><td class="memItemLeft" align="right" valign="top">static auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2c586921b020480449159786461195aa">get_average</a> ()</td></tr>
<tr class="memdesc:a2c586921b020480449159786461195aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current average.  <br /></td></tr>
<tr class="separator:a2c586921b020480449159786461195aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c8796258ac6cd4006a55c236c383287" id="r_a2c8796258ac6cd4006a55c236c383287"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2c8796258ac6cd4006a55c236c383287">update_average</a> (int16_t currentPower)</td></tr>
<tr class="memdesc:a2c8796258ac6cd4006a55c236c383287"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the sliding average.  <br /></td></tr>
<tr class="separator:a2c8796258ac6cd4006a55c236c383287"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a4771d7ed435411f4fd06dc480c1b1508" id="r_a4771d7ed435411f4fd06dc480c1b1508"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classrelayOutput.html">relayOutput</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4771d7ed435411f4fd06dc480c1b1508">relay</a> [N]</td></tr>
<tr class="separator:a4771d7ed435411f4fd06dc480c1b1508"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62a753c9ea9c15e35211398fb155a971" id="r_a62a753c9ea9c15e35211398fb155a971"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a62a753c9ea9c15e35211398fb155a971">settle_change</a> { 60 }</td></tr>
<tr class="separator:a62a753c9ea9c15e35211398fb155a971"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a03a84f65f56f7e8bce137c967dfe7ebf" id="r_a03a84f65f56f7e8bce137c967dfe7ebf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classEWMA__average.html">EWMA_average</a>&lt; D *60/<a class="el" href="config__system_8h.html#aa1ffffd0033bb88a0611cc09daef8d20">DATALOG_PERIOD_IN_SECONDS</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a03a84f65f56f7e8bce137c967dfe7ebf">ewma_average</a></td></tr>
<tr class="separator:a03a84f65f56f7e8bce137c967dfe7ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;uint8_t N, uint8_t D = 10&gt;<br />
class RelayEngine&lt; N, D &gt;</div><p>Manages a collection of relays and their behavior based on surplus and import thresholds. </p>
<p>The <code><a class="el" href="classRelayEngine.html" title="Manages a collection of relays and their behavior based on surplus and import thresholds.">RelayEngine</a></code> class provides functionality to manage multiple relays, including their initialization, state transitions, and configuration. It uses a sliding average to determine the current power state and adjusts the relays accordingly.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">N</td><td>The number of relays to be managed. </td></tr>
    <tr><td class="paramname">D</td><td>The duration in minutes for the sliding average (default is 10 minutes).</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li><b>Relay Management</b>: Handles the state of multiple relays, turning them ON or OFF based on surplus and import thresholds.</li>
<li><b>Sliding Average</b>: Uses an Exponentially Weighted Moving Average (EWMA) to calculate the average power over a configurable duration.</li>
<li><b>State Transitions</b>: Ensures stable operation by enforcing minimum ON/OFF durations and a delay between state changes.</li>
<li><b>Initialization</b>: Provides methods to initialize relay pins and print their configuration. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00308">308</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa834d2148c13bbf4c63f949033746ecd" name="aa834d2148c13bbf4c63f949033746ecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa834d2148c13bbf4c63f949033746ecd">&#9670;&#160;</a></span>RelayEngine() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D = 10&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;<a class="el" href="classRelayEngine.html">::RelayEngine</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classrelayOutput.html">relayOutput</a>(&amp;)</td>          <td class="paramname"><span class="paramname"><em>ref</em></span>[N]</td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel explicit">explicit</span><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a list of relays. </p>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00315">315</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<a id="a926eff34f40ee3e7d7132ba4cb693d40" name="a926eff34f40ee3e7d7132ba4cb693d40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a926eff34f40ee3e7d7132ba4cb693d40">&#9670;&#160;</a></span>RelayEngine() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D = 10&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;<a class="el" href="classRelayEngine.html">::RelayEngine</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structintegral__constant.html">integral_constant</a>&lt; uint8_t, D &gt;</td>          <td class="paramname"><span class="paramname"><em>ic</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classrelayOutput.html">relayOutput</a>(&amp;)</td>          <td class="paramname"><span class="paramname"><em>ref</em></span>[N]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a list of relays with a custom sliding average. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ic</td><td>Integral constant representing the sliding average duration. </td></tr>
    <tr><td class="paramname">ref</td><td>Array of relay configurations. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00326">326</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2c586921b020480449159786461195aa" name="a2c586921b020480449159786461195aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c586921b020480449159786461195aa">&#9670;&#160;</a></span>get_average()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D = 10&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static auto <a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;::get_average </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the current average. </p>
<dl class="section return"><dt>Returns</dt><dd>auto The current average </dd></dl>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00357">357</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<a id="a981b20422ed19d2aa87d042c583173ee" name="a981b20422ed19d2aa87d042c583173ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a981b20422ed19d2aa87d042c583173ee">&#9670;&#160;</a></span>get_relay()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D = 10&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const auto &amp; <a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;::get_relay </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>idx</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the relay object. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">idx</td><td>The index of the relay </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>constexpr const auto&amp; The relay object </dd></dl>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00347">347</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<a id="a1ed9500ebf4f6d7afb519c377fab42d3" name="a1ed9500ebf4f6d7afb519c377fab42d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ed9500ebf4f6d7afb519c377fab42d3">&#9670;&#160;</a></span>get_size()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D = 10&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto <a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;::get_size </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the number of relays. </p>
<dl class="section return"><dt>Returns</dt><dd>constexpr auto The number of relays </dd></dl>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00336">336</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<a id="a4f831b566b2da140a17333ab6a39e5dc" name="a4f831b566b2da140a17333ab6a39e5dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f831b566b2da140a17333ab6a39e5dc">&#9670;&#160;</a></span>inc_duration()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;::inc_duration </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increment the duration's state of each relay. </p>
<p>This method updates the duration of the current state for each relay and decreases the delay (<code>settle_change</code>) until the next state change is allowed. </p>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00453">453</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<a id="ab3ff0ac83bf3a665174f0ea373974e3a" name="ab3ff0ac83bf3a665174f0ea373974e3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3ff0ac83bf3a665174f0ea373974e3a">&#9670;&#160;</a></span>printConfiguration()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D = 10&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;::printConfiguration </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print the configuration of each relay. </p>
<p>This method outputs the configuration of all relays, including their pin assignments, thresholds, and minimum ON/OFF durations, to the Serial interface. </p>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00433">433</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<a id="a2891986bc989d9c35301711f674bc523" name="a2891986bc989d9c35301711f674bc523"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2891986bc989d9c35301711f674bc523">&#9670;&#160;</a></span>proceed_relays()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D = 10&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;::proceed_relays </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Proceed all relays in increasing order (surplus) or decreasing order (import). </p>
<p>This method adjusts the state of the relays based on the current average power. If surplus power is available, it tries to turn ON relays in increasing order. If power is being imported, it tries to turn OFF relays in decreasing order. </p>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00391">391</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<a id="a2c8796258ac6cd4006a55c236c383287" name="a2c8796258ac6cd4006a55c236c383287"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c8796258ac6cd4006a55c236c383287">&#9670;&#160;</a></span>update_average()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D = 10&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;::update_average </td>
          <td>(</td>
          <td class="paramtype">int16_t</td>          <td class="paramname"><span class="paramname"><em>currentPower</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the sliding average. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentPower</td><td>Current power at the grid </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00367">367</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a03a84f65f56f7e8bce137c967dfe7ebf" name="a03a84f65f56f7e8bce137c967dfe7ebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03a84f65f56f7e8bce137c967dfe7ebf">&#9670;&#160;</a></span>ewma_average</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D = 10&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEWMA__average.html">EWMA_average</a>&lt; D * 60 / <a class="el" href="config__system_8h.html#aa1ffffd0033bb88a0611cc09daef8d20">DATALOG_PERIOD_IN_SECONDS</a> &gt; <a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;::ewma_average</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>EWMA average </p>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00450">450</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<a id="a4771d7ed435411f4fd06dc480c1b1508" name="a4771d7ed435411f4fd06dc480c1b1508"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4771d7ed435411f4fd06dc480c1b1508">&#9670;&#160;</a></span>relay</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D = 10&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classrelayOutput.html">relayOutput</a> <a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;::relay[N]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Array of relays </p>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00446">446</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<a id="a62a753c9ea9c15e35211398fb155a971" name="a62a753c9ea9c15e35211398fb155a971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62a753c9ea9c15e35211398fb155a971">&#9670;&#160;</a></span>settle_change</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t N, uint8_t D = 10&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classRelayEngine.html">RelayEngine</a>&lt; N, D &gt;::settle_change { 60 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel mutable">mutable</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Delay in seconds until next change occurs </p>

<p class="definition">Definition at line <a class="el" href="utils__relay_8h_source.html#l00448">448</a> of file <a class="el" href="utils__relay_8h_source.html">utils_relay.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Mk2_3phase_RFdatalog_temp/<a class="el" href="utils__relay_8h_source.html">utils_relay.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
